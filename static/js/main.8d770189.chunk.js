(this.webpackJsonpkakuro=this.webpackJsonpkakuro||[]).push([[0],{130:function(e,t,n){e.exports={createGame:"CreateGame_createGame__t-nS6",createSteps:"CreateGame_createSteps__3TBZt","p-steps":"CreateGame_p-steps__1OyM9","p-steps-item":"CreateGame_p-steps-item__2Lv77","p-menuitem-link":"CreateGame_p-menuitem-link__3yOB-","p-steps-title":"CreateGame_p-steps-title__6eRPZ"}},131:function(e,t,n){e.exports={gameBackground:"DrawGrid_gameBackground__2dTqA",grid:"DrawGrid_grid__XoYjv"}},203:function(e,t,n){},204:function(e,t,n){},229:function(e,t,n){e.exports={startItem:"MyMenubar_startItem__5gsTl"}},240:function(e,t,n){e.exports={content:"MainMenu_content__1zXTd"}},242:function(e,t,n){e.exports={guessButton:"GuessButton_guessButton__2HTay"}},243:function(e,t,n){e.exports={blank:"BlankCell_blank__h84dH"}},251:function(e,t,n){},261:function(e,t){},263:function(e,t){},278:function(e,t){},280:function(e,t){},308:function(e,t){},310:function(e,t){},311:function(e,t){},316:function(e,t){},318:function(e,t){},324:function(e,t){},326:function(e,t){},345:function(e,t){},357:function(e,t){},360:function(e,t){},497:function(e,t,n){},498:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),c=n(20),l=n.n(c),r=(n(251),n(18)),i=Object(r.b)(),u=n(6),o=n(226),d=n(3),m=n(17),b=n.n(m),j=n(32),f=n(30),p=n(228),h=n(86),g=n.n(h),x=g.a.create({baseURL:"https://kakuro-api.kuehnert.it/"});var v,O=function(){var e=localStorage.getItem("token");return e?{Authorization:"Bearer ".concat(e)}:{Authorization:null}};console.log("userSlice: loading user from storage...");try{var y=localStorage.getItem("user");v=null!=y?JSON.parse(y):null;var N=localStorage.getItem("token");if(N){var S=Object(p.decode)(N);Date.now()>=1e3*S.exp&&(console.log("token expired"),localStorage.removeItem("user"),localStorage.removeItem("token"),v=null)}}catch(cn){localStorage.removeItem("user"),localStorage.removeItem("token"),v=null}var C={isLoggedIn:null!=v,isRequesting:!1,user:v,error:null},k=Object(f.b)({name:"user",initialState:C,reducers:{loginSuccess:function(e,t){e.user=t.payload,e.isLoggedIn=null!=t.payload,e.error=null,e.isRequesting=!1},logoutFailed:function(e,t){e.error=t.payload,e.user=null,e.isLoggedIn=!1,e.isRequesting=!1},logoutSuccess:function(e){e.user=null,e.isLoggedIn=!1,e.error=null,e.isRequesting=!1},signUpSuccess:function(e,t){e.user=t.payload,e.isLoggedIn=null!=t.payload,e.error=null,e.isRequesting=!1},signUpFailed:function(e,t){e.error=t.payload,e.user=null,e.isLoggedIn=!1,e.isRequesting=!1},submitting:function(e){e.isRequesting=!0},requestFailed:function(e,t){console.log("action.payload:",t.payload);var n=t.payload.response.status;401!==n&&403!==n||(localStorage.removeItem("user"),localStorage.removeItem("token"),e.user=null,e.isLoggedIn=!1,e.error=null,e.isRequesting=!1)}}}),z=k.actions,_=z.loginSuccess,w=z.logoutFailed,I=z.logoutSuccess,M=z.requestFailed,G=z.signUpFailed,H=(z.signUpSuccess,z.submitting),F=k.reducer,P=n(229),B=n.n(P),A=n(1),D=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.users})).user,n=Object(A.jsx)("div",{className:B.a.startItem,children:Object(A.jsx)("h3",{children:"Mr K.'s Kakuro"})}),a=[{label:"Menu",icon:"mdi mdi-hamburger",command:function(){return i.push("/")}},{label:"Design Puzzle",icon:"mdi mdi-pencil",command:function(){return i.push("/create")},disabled:null==t},{label:"Play Puzzle",icon:"mdi mdi-play",command:function(){return i.push("/play")}}],s=t?Object(A.jsx)(u.a,{label:"Sign Out ".concat(t.name),icon:"mdi mdi-logout",onClick:function(){return e(function(){var e=Object(j.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.post("/users/logout",null,{headers:O()});case 3:e.next=10;break;case 5:return e.prev=5,e.t0=e.catch(0),n=e.t0.response,t(w(JSON.stringify(n))),e.abrupt("return");case 10:return e.prev=10,localStorage.removeItem("user"),localStorage.removeItem("token"),e.finish(10);case 14:t(I());case 15:case"end":return e.stop()}}),e,null,[[0,5,10,14]])})));return function(t){return e.apply(this,arguments)}}())}}):Object(A.jsx)(u.a,{label:"Sign Up/Sign In",icon:"mdi mdi-login",onClick:function(){return i.push("/signin")}});return Object(A.jsx)(o.a,{model:a,start:n,end:s})},E=n(244),R=Object(f.b)({name:"alerts",initialState:{alerts:{},pageTitle:null,isFetching:!1,notFound:null},reducers:{clearAlert:function(e,t){delete e.alerts[t.payload]},setAlert:function(e,t){var n=t.payload;e.alerts[n.severity]=n,e.isFetching=!1},setNotFound:function(e,t){e.notFound=t.payload},setErrorAlert:function(e,t){var n={severity:"error",summary:t.payload};e.alerts[n.severity]=n,e.isFetching=!1},setSuccessAlert:function(e,t){var n={severity:"success",summary:t.payload};e.alerts[n.severity]=n,e.isFetching=!1},setIsFetching:function(e,t){e.isFetching=t.payload},setPageTitle:function(e,t){e.pageTitle=t.payload,document.title=t.payload}}}),V=R.actions,J=V.clearAlert,q=(V.setAlert,V.setErrorAlert),T=V.setSuccessAlert,L=(V.setIsFetching,V.setPageTitle,V.setNotFound,R.reducer),U=function(){var e=Object(d.c)((function(e){return e.alerts.alerts})),t=Object(d.b)(),n=Object(a.useRef)(null);return Object(a.useEffect)((function(){Object.keys(e).forEach((function(a){var s;null===(s=n.current)||void 0===s||s.show({severity:a,summary:e[a].summary,detail:e[a].detail}),t(J(a))}))}),[t,e]),Object(A.jsx)(E.a,{ref:n})},K=n(87),X=n(230),Y=n(16);function Q(e,t){for(var n=[{index:-1,sum:-1,count:-1,used:new Array},{index:-1,sum:-1,count:-1,used:new Array}],a=t;e.cells[a].type===se.NumberCell;){var s=e.cells[a];s.guess>0&&n[0].used.push(s.guess),a--}for(n[0].index=a,n[0].sum=e.cells[a].hintHorizontal||-1,a=t;(a+1)%e.columnCount!==0&&e.cells[a+1].type===se.NumberCell;){a++;var c=e.cells[a];c.guess>0&&n[0].used.push(c.guess)}n[0].count=a-n[0].index;for(var l=t;e.cells[l].type===se.NumberCell;){var r=e.cells[l];r.guess>0&&n[1].used.push(r.guess),l-=e.columnCount}n[1].index=l,n[1].sum=e.cells[l].hintVertical||-1;for(var i=(l=t)+e.columnCount;i<e.cells.length&&e.cells[i].type===se.NumberCell;){l=i;var u=e.cells[l];u.guess>0&&n[1].used.push(u.guess),i=l+e.columnCount}var o=(l-n[1].index)/e.columnCount;return n[1].count=o,n}var W=n(15),Z=function(){for(var e={},t=new Array(10).fill(!1),n=function n(a,s){10===s?function(){for(var n=new Array,a=0,s=0,c=1;c<t.length;c++)t[c]&&(n.push(c),a+=1,s+=c);e[a]||(e[a]={}),e[a][s]||(e[a][s]=new Array),e[a][s].push(n)}():(t[s]=!0,n(a,s+1),t[s]=!1,n(a,s+1),s++)},a=1;a<9;a++)t[a]=!0,n(a,a+1),t[a]=!1;return delete e[1],e}();Object.freeze(Z);var $,ee=Z;function te(e){var t=ee[e.count][e.sum];return t=t.filter((function(t){return e.used.every((function(e){return t.includes(e)}))}))}function ne(e,t){if(t>=e.cells.length){var n=JSON.parse(JSON.stringify(e));n.cells.forEach((function(e){if(e.type===se.NumberCell){var t=e;t.solution=t.guess,t.guess=0,t.pencilMarks=[]}})),$.push(n)}else{var a=e.cells[t];if(a.type!==se.NumberCell||a.guess>0)ne(e,t+1);else{var s=a,c=re(e,a.index),l=ie(e,a.index);s.pencilMarks.forEach((function(n){if(!c.usedDigits.includes(n)&&!l.usedDigits.includes(n)&&!(c.usedDigits.length===c.count-1&&c.sum+n!==c.hint||l.usedDigits.length===l.count-1&&l.sum+n!==l.hint)){s.guess=n;var a=JSON.parse(JSON.stringify(e));de(a),ue(a),ne(a,t+1),s.guess=0}}))}}}var ae,se,ce,le=function(e){var t=JSON.parse(JSON.stringify(e));for(de(t);ue(t););return $=new Array,ne(t,0),0===$.length?{error:"Puzzle invalid; no solution."}:$.length>1?{error:"Puzzle invalid; more than one solution (".concat($.length,").")}:(function(e){console.log("Solution",JSON.stringify(e.cells.filter((function(e){return e.type===se.NumberCell})).map((function(e){return e.solution}))))}($[0]),{solution:$[0]})};function re(e,t){for(var n=e.cells,a=e.columnCount,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],c=s?1:a,l=t-c,r=[],i=[],u=0;n[l].type===se.NumberCell;)l-=c;for(var o=l;o+c<n.length&&n[o+c].type===se.NumberCell;){o+=c,r.push(o);var d=n[o];d.guess&&(i.push(d.guess),u+=d.guess)}var m=s?n[l].hintHorizontal:n[l].hintVertical,b=(o-l)/c;return{index:t,hint:m,count:b,sum:u,cellIndexes:r,usedDigits:i}}function ie(e,t){return re(e,t,!1)}function ue(e){var t=!1;return e.cells.forEach((function(n){if(n.type===se.NumberCell){var a,s=n;null==s.guess&&1===(null===(a=s.pencilMarks)||void 0===a?void 0:a.length)&&(!function(e,t,n){e.cells[t].guess=n,re(e,t).cellIndexes.forEach((function(t){var a=e.cells[t];a.pencilMarks=a.pencilMarks.filter((function(e){return e!==n}))})),ie(e,t).cellIndexes.forEach((function(t){var a=e.cells[t];a.pencilMarks=a.pencilMarks.filter((function(e){return e!==n}))}))}(e,s.index,s.pencilMarks[0]),t=!0)}})),t}function oe(e,t,n){if(!(e.guess>0)){var a=Q(n,t),s=te(a[0]),c=te(a[1]),l=Array.from(new Set(s.flat())),r=Array.from(new Set(c.flat())),i=[].concat(Object(W.a)(a[0].used),Object(W.a)(a[1].used)),u=l.filter((function(e){return r.includes(e)&&!i.includes(e)})).sort();e.pencilMarks=u}}function de(e){e.cells.forEach((function(t,n){t.type===se.NumberCell&&oe(t,n,e)}))}!function(e){e[e.Easy=0]="Easy",e[e.Medium=1]="Medium",e[e.MediumPlus=2]="MediumPlus",e[e.Hard=3]="Hard",e[e.VeryHard=4]="VeryHard"}(ae||(ae={})),function(e){e.BlankCell="blankCell",e.HintCell="hintCell",e.NumberCell="numberCell"}(se||(se={})),function(e){e[e.Raw=0]="Raw",e[e.Valid=1]="Valid",e[e.Solved=2]="Solved"}(ce||(ce={}));var me={hints:[{index:-1,sum:-1,count:-1,used:new Array},{index:-1,sum:-1,count:-1,used:new Array}]},be=Object(f.b)({name:"game",initialState:me,reducers:{setCurrentGame:function(e,t){var n=JSON.parse(JSON.stringify(t.payload));n.cells.filter((function(e){return e.type===se.NumberCell})).forEach((function(e){var t=e;t.guess||(t.guess=0),t.pencilMarks||(t.pencilMarks=[])})),e.game=n},fetchGameSuccess:function(e,t){e.game=Object(Y.a)({},t.payload),e.game.cells.filter((function(e){return e.type===se.NumberCell})).forEach((function(e){var t=e;t.guess||(t.guess=0),t.pencilMarks||(t.pencilMarks=[])}))},setSelectedIndex:function(e,t){var n=t.payload;e.selectedIndex=n,e.hints=Q(e.game,n)},setGuess:function(e,t){var n=t.payload,a=n.index,s=n.guess,c=JSON.parse(JSON.stringify(e.game)),l=c.cells[a];l.type===se.NumberCell&&(l.guess=s,0===s&&oe(l,a,c),e.game=c),e.hints=Q(e.game,a)},togglePencilMark:function(e,t){var n=t.payload,a=n.index,s=n.guess,c=JSON.parse(JSON.stringify(e.game)),l=c.cells[a];if(l.type===se.NumberCell){var r=l.pencilMarks.indexOf(s);r<0?(l.pencilMarks.push(s),l.pencilMarks.sort()):l.pencilMarks.splice(r,1),e.game=c}},autoPencil:function(e,t){ue(e.game),de(e.game)}}}),je=be.actions,fe=je.fetchGameSuccess,pe=je.setSelectedIndex,he=je.setCurrentGame,ge=je.setGuess,xe=je.autoPencil,ve=je.togglePencilMark,Oe=be.reducer;var ye=function(e){return e.cells.filter((function(e){return e.type===se.HintCell})).every((function(e){if(null==e)return!0;var t=e;return(!t.hintHorizontal||t.hintHorizontal>-1)&&(!t.hintVertical||t.hintVertical>-1)}))};var Ne=function(e){for(var t=e.cells,n=0;n<t.length-1;n++){var a=t[n],s=n+1,c=n+e.columnCount;a.type===se.BlankCell?(t[s].type===se.NumberCell&&(a.type=se.HintCell,a.hintHorizontal=-1),c<t.length&&t[c].type===se.NumberCell&&(a.type=se.HintCell,a.hintVertical=-1)):a.type===se.HintCell&&t[s].type!==se.NumberCell&&t[c].type!==se.NumberCell&&(a.type=se.BlankCell)}},Se=n(231),Ce=["cells"];var ke,ze,_e=function(e){var t=e.cells.map((function(e){return e.type!==se.NumberCell?0:e.solution})).join(""),n=(e.cells,Object(Se.a)(e,Ce));return n.cellString=t,console.log("newServerGame:",n),n};!function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical",e[e.Both=2]="Both"}(ke||(ke={})),function(e){e[e.SetSize=0]="SetSize",e[e.DrawGrid=1]="DrawGrid",e[e.InsertHints=2]="InsertHints",e[e.CheckPuzzle=3]="CheckPuzzle"}(ze||(ze={}));var we=[{label:"Set Size"},{label:"Draw Grid"},{label:"Insert Hints"},{label:"Check Puzzle"}],Ie=function(e,t){return Array.from({length:e*t},(function(e,t){return{index:t,type:se.BlankCell}}))},Me={activeStep:0,puzzle:{name:"Unnamed",level:4,columnCount:10,rowCount:10,cells:Ie(10,10),state:ce.Raw}},Ge=Object(f.b)({name:"design",initialState:Me,reducers:{setActiveStep:function(e,t){e.activeStep=t.payload,localStorage.setItem("puzzleState",JSON.stringify(e))},setBaseGame:function(e,t){e.puzzle=Object(Y.a)(Object(Y.a)({},e.puzzle),t.payload),e.puzzle.cells=Ie(e.puzzle.columnCount,e.puzzle.rowCount)},clearDesignGame:function(){return localStorage.removeItem("puzzleState"),Me},setPuzzleState:function(e,t){return t.payload},updateCell:function(e,t){var n=t.payload;n.type!==se.NumberCell||n.guess||(n.guess=0),e.puzzle.cells[n.index]=n,e.puzzle.state=ce.Raw},makeHintCells:function(e){Ne(e.puzzle)},solveGameSuccess:function(e,t){e.puzzle=t.payload,e.puzzle.state=ce.Solved},solveGameFailed:function(e){e.puzzle.state=ce.Raw,e.activeStep=ze.InsertHints},checkGameSuccess:function(e){e.puzzle.state=ce.Valid},createGameSuccess:function(){return i.push("/"),localStorage.removeItem("puzzleState"),Me}}}),He=Ge.actions,Fe=(He.checkGameSuccess,He.clearDesignGame),Pe=He.createGameSuccess,Be=He.setActiveStep,Ae=He.setBaseGame,De=He.setPuzzleState,Ee=He.makeHintCells,Re=He.solveGameSuccess,Ve=He.solveGameFailed,Je=He.updateCell,qe=Ge.reducer,Te=n(130),Le=n.n(Te),Ue=n(14),Ke=n(88),Xe=n(7),Ye=n.n(Xe),Qe=n(58),We=function(e){var t=e.handleBack,n=e.handleNext,a=e.children,s=Object(d.c)((function(e){return e.design})).activeStep;return Object(A.jsx)(K.a,{headerTemplate:function(e){var a="".concat(e.className," p-jc-start"),c="".concat(e.titleClassName," p-pl-1");return Object(A.jsxs)("div",{className:a,children:[Object(A.jsxs)("span",{className:c,children:["Step ",s+1,": ",we[s].label]}),Object(A.jsxs)("span",{className:c,children:[Object(A.jsx)(u.a,{label:"Back",icon:"mdi mdi-arrow-left",onClick:t,disabled:null==t}),Object(A.jsx)(u.a,{label:"Next",icon:"mdi mdi-arrow-right",onClick:n,disabled:null==n})]})]})},children:a})},Ze=(n(203),n(204),n(92)),$e=n.n(Ze),et=n(93),tt=n.n(et),nt=function(e){var t=e.cell,n=e.across,s=e.down,c=e.visible,l=e.onHide,r=Object(d.c)((function(e){return e.design})).puzzle,i=Object(a.useState)([]),o=Object(Ue.a)(i,2),m=o[0],b=o[1],j=Object(d.b)(),f=function(e){var n=re(r,t.index+(e?1:r.columnCount),e),a=Object.keys(ee[n.count]).map((function(e){return+e})),c=Math.min.apply(Math,Object(W.a)(a)),i=Math.max.apply(Math,Object(W.a)(a));return Object(A.jsxs)("div",{className:"",children:[Object(A.jsx)("div",{className:tt.a.label,children:e?"Across":"Down"}),Object(A.jsx)("div",{className:tt.a.buttonGrid,children:m.map((function(n){return Object(A.jsx)(u.a,{label:n<c||n>i?"":""+n,onClick:function(){return function(e,n){var a=Object(Y.a)(Object(Y.a)({},t),{},{type:se.HintCell});n?a.hintHorizontal=e:a.hintVertical=e,j(Je(a)),n&&s||l()}(n,e)},disabled:n<c||n>i,className:Ye()("p-button-rounded",tt.a.button,e?"p-button-success":"p-button-info")},n)}))})]})};return Object(a.useEffect)((function(){var e=Array.from({length:46},(function(e,t){return t}));b(e)}),[]),Object(A.jsxs)(Qe.a,{header:"Set number(s) for hint cell",style:{width:"30vw"},visible:c,modal:!0,onHide:l,children:[n&&f(!0),s&&f(!1)]})},at=function(e){var t=e.cell,n=(e.index,Object(d.c)((function(e){return e.design})).activeStep),s=Object(d.b)(),c=Object(a.useState)(!1),l=Object(Ue.a)(c,2),r=l[0],i=l[1],u=function(e){if(e){var t=e>0?e:"?",n=e>0?"":$e.a.hintMissing;return Object(A.jsx)("div",{className:n,children:t})}return null};return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)("div",{className:Ye()($e.a.designCell,t.type),onClick:function(e){if(1===n){var a=Object(Y.a)(Object(Y.a)({},t),{},{type:t.type===se.BlankCell?se.NumberCell:se.BlankCell});s(Je(a))}else 2===n&&t.type===se.HintCell&&i(!0)},children:[Object(A.jsx)("div",{className:"horizontalHint",children:u(t.hintHorizontal)}),Object(A.jsx)("div",{className:"verticalHint",children:u(t.hintVertical)}),Object(A.jsx)("div",{className:$e.a.solution,children:u(t.solution)})]}),Object(A.jsx)(nt,{cell:t,visible:r,onHide:function(){i(!1)},across:null!=t.hintHorizontal,down:null!=t.hintVertical})]})},st=n(131),ct=n.n(st),lt=function(){var e=Object(d.c)((function(e){return e.design})).puzzle,t=e.columnCount,n=e.cells;return Object(A.jsx)("div",{children:Object(A.jsx)("div",{className:ct.a.gameBackground,children:Object(A.jsx)("div",{className:ct.a.grid,style:{gridTemplateColumns:"repeat(".concat(t,", 1fr)")},children:n.map((function(e,t){return Object(A.jsx)(at,{index:t,cell:e},t)}))})})})},rt=n(60),it=n.n(rt),ut=function(){var e=Object(a.useState)(!1),t=Object(Ue.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(""),l=Object(Ue.a)(c,2),r=l[0],o=l[1],m=Object(d.c)((function(e){return e.design})),f=m.activeStep,p=m.puzzle,h=Object(d.b)();Object(a.useEffect)((function(){o(JSON.stringify(p))}),[p]);return Object(A.jsxs)(We,{handleBack:function(){h(Be(f-1))},children:[Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(u.a,{label:"Play Locally",icon:"mdi mdi-play",onClick:function(){h(he(p)),i.push("/play")},className:it.a.button}),Object(A.jsx)(u.a,{label:"Export Puzzle",icon:"mdi mdi-export",onClick:function(){return s(!0)},className:it.a.button}),Object(A.jsx)(u.a,{label:"Solve",icon:"mdi mdi-brain",onClick:function(){h(function(){var e=Object(j.a)(b.a.mark((function e(t,n){var a,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n().design.puzzle,(s=le(a)).error?(t(q("Puzzle invalid: ".concat(s.error))),t(Ve())):(t(T("Puzzle solved.")),t(Re(s.solution)));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},className:it.a.button}),Object(A.jsx)(u.a,{label:"Send to Server & Play",icon:"mdi mdi-send",onClick:function(){var e;h(he(p)),h((e=p,function(){var t=Object(j.a)(b.a.mark((function t(n){var a,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=_e(e),t.prev=1,t.next=4,x.post("/puzzles",a,{headers:O()});case 4:s=t.sent,a=s.data,t.next=13;break;case 8:return t.prev=8,t.t0=t.catch(1),console.log("error:",JSON.stringify(t.t0)),n(q("Error trying to save puzzle: ".concat(t.t0.message))),t.abrupt("return");case 13:n(Pe()),n(T("Puzzle erzeugt."));case 15:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()))},className:it.a.button,disabled:p.state!==ce.Solved}),Object(A.jsx)(u.a,{label:"Start Over",icon:"mdi mdi-restart",onClick:function(){h(Fe())},className:Ye()(it.a.button,"p-button-warning","p-button-success")}),Object(A.jsx)(Qe.a,{header:"Spiel exportieren",visible:n,style:{width:"50vw"},modal:!0,onHide:function(){return s(!1)},children:Object(A.jsx)(Ke.a,{rows:8,style:{width:"100%"},value:r})})]}),Object(A.jsx)(lt,{})]})};var ot=function(e){for(var t=e.cells,n=0,a=0;a<t.length;a++){var s=t[a];if(s.type===se.NumberCell){if(n+=1,1===re(e,s.index).count)return{valid:!1,message:"There is at least one group across with only one cell"};if(1===ie(e,s.index).count)return{valid:!1,message:"There is at least one group down with only one cell"}}}return n<3?{valid:!1,message:"Too few number cells"}:{valid:!0,message:"Puzzle grid is fine"}},dt=function(){var e=Object(d.c)((function(e){return e.design})),t=e.activeStep,n=e.puzzle,a=Object(d.b)();return Object(A.jsx)(We,{handleBack:function(){a(Be(t-1))},handleNext:function(){var e=ot(n);e.valid?a(Be(t+1)):a(q(e.message))},children:Object(A.jsx)(lt,{})})},mt=function(){var e=Object(d.c)((function(e){return e.design})),t=e.activeStep,n=e.puzzle,s=Object(d.b)();Object(a.useEffect)((function(){s(Ee())}),[]);return Object(A.jsx)(We,{handleNext:function(){var e=ye(n);s(e?Be(t+1):q("Not all hints provided"))},handleBack:function(){s(Be(t-1))},children:Object(A.jsx)(lt,{})})},bt=n(26),jt=function(e){var t=e.label,n=e.name,a=e.hint;return Object(A.jsxs)("div",{className:"field grid",children:[Object(A.jsx)("label",{htmlFor:n,className:"col-12 mb-2 md:col-2 md:mb-0",children:t}),Object(A.jsxs)("div",{className:"col-12 md:col-10",children:[Object(A.jsx)(bt.b,Object(Y.a)(Object(Y.a)({},e),{},{className:"inputfield w-full"})),a&&Object(A.jsx)("div",{dangerouslySetInnerHTML:{__html:a}}),Object(A.jsx)(bt.a,{name:n,component:"div",className:"fieldErrorMessage"})]})]})},ft=n(234),pt=function(e){var t=e.values,n=e.field,a=e.label,s=e.options,c=e.setFieldValue;return Object(A.jsxs)("div",{className:"field grid",children:[Object(A.jsx)("label",{htmlFor:n,className:"col-12 mb-2 md:col-2 md:mb-0",children:a}),Object(A.jsx)("div",{className:"col-12 md:col-10",children:Object(A.jsx)(ft.a,{id:n,value:t[n],options:s,onChange:function(e){return function(e){c(n,e.value)}(e)},className:"justify-content-start"})})]})},ht=n(235),gt=n(236),xt=function(e){var t=e.values,n=e.field,a=e.label,s=e.setFieldValue,c=e.min,l=e.max,r=function(e){s(n,e.value)};return Object(A.jsxs)("div",{className:"field grid",children:[Object(A.jsx)("label",{htmlFor:n,className:"col-12 mb-2 md:col-2 md:mb-0",children:a}),Object(A.jsxs)("div",{className:"col-12 md:col-10",children:[Object(A.jsx)(ht.a,{value:t[n],onChange:function(e){return r(e)},className:"inputfield w-full"}),Object(A.jsx)(gt.a,{id:n,value:t[n],onChange:function(e){return r(e)},min:c,max:l,className:"inputfield w-full"})]})]})},vt=n(27),Ot=n(28),yt=[{label:"Easy",value:0},{label:"Medium",value:1},{label:"Medium Plus",value:2},{label:"Hard",value:3},{label:"Very Hard",value:4}],Nt=Ot.b().shape({name:Ot.c().max(50,"Must be 50 characters or less").required("Required"),level:Ot.a().min(0).max(4).required(),columnCount:Ot.a().min(4,"Must be between ".concat(4," and 30")).max(30).required("Required"),rowCount:Ot.a().min(4,"Must be between ".concat(4," and 30")).max(30).required("Required")}),St=function(){var e=Object(a.useState)(!1),t=Object(Ue.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(""),l=Object(Ue.a)(c,2),r=l[0],i=l[1],o=Object(d.b)(),m=Object(d.c)((function(e){return e.design})),b=m.activeStep,j=m.puzzle,f=Object(a.useRef)(null),p=function(){console.log("Click"),f.current&&f.current.handleSubmit(),o(Be(b+1))},h=function(e){var t=JSON.parse(r);console.log("newPuzzle",t),s(!1),o(De({activeStep:1,puzzle:t}))};return Object(A.jsx)(bt.d,{enableReinitialize:!0,initialValues:j,onSubmit:function(e){o(Ae(e))},validationSchema:Nt,innerRef:f,children:function(e){var t=e.setFieldValue,a=e.values;return Object(A.jsxs)(We,{handleNext:p,children:[Object(A.jsx)("h1",{children:"Import Puzzle"}),Object(A.jsx)(u.a,{label:"Import Puzzle",icon:"mdi mdi-import",onClick:function(){return s(!0)}}),Object(A.jsx)("h1",{children:"\u2026Or Create Puzzle"}),Object(A.jsxs)(bt.c,{children:[Object(A.jsx)(jt,{name:"name",label:"Puzzle Name",as:vt.a}),Object(A.jsx)(pt,{field:"level",label:"Difficulty",setFieldValue:t,options:yt,values:a}),Object(A.jsx)(xt,{field:"columnCount",label:"Columns Across",setFieldValue:t,min:4,max:40,values:a}),Object(A.jsx)(xt,{field:"rowCount",label:"Rows Down",setFieldValue:t,min:4,max:40,values:a})]}),Object(A.jsxs)(Qe.a,{header:"Spiel importieren",visible:n,style:{width:"50vw"},modal:!0,onHide:function(){return s(!1)},children:[Object(A.jsx)(Ke.a,{rows:8,style:{width:"100%"},value:r,onChange:function(e){return i(e.target.value)}}),Object(A.jsx)(u.a,{label:"Import",onClick:h})]})]})}})},Ct=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.design})).activeStep;return Object(a.useEffect)((function(){var t=localStorage.getItem("puzzleState");if(t){console.log("Found puzzle in local storage");var n=JSON.parse(t);e(De(n))}}),[]),Object(A.jsxs)("div",{className:Le.a.createGame,children:[Object(A.jsx)(K.a,{header:"Create a new Kakuro puzzle",children:Object(A.jsx)("div",{className:Le.a.createSteps,children:Object(A.jsx)(X.a,{model:we,activeIndex:t})})}),0===t&&Object(A.jsx)(St,{}),1===t&&Object(A.jsx)(dt,{}),2===t&&Object(A.jsx)(mt,{}),3===t&&Object(A.jsx)(ut,{})]})},kt=n(43),zt=n(240),_t=n.n(zt),wt=function(){return Object(A.jsx)("div",{className:_t.a.content,children:Object(A.jsxs)("div",{className:Ye()("text-center"),children:[Object(A.jsxs)("div",{className:"mb-3 font-bold text-2xl",children:[Object(A.jsx)("span",{className:"text-900",children:"The best "}),Object(A.jsx)("span",{className:"text-blue-600",children:"Kakuro Game "}),Object(A.jsx)("span",{className:"text-900",children:"money can buy"})]}),Object(A.jsx)("div",{className:"text-700 text-sm mb-6",children:"All of this is work in progress, so be patient and stay tuned."}),Object(A.jsxs)("div",{className:"grid",children:[Object(A.jsxs)("div",{className:"col-12 md:col-4 mb-4 px-5",children:[Object(A.jsx)(kt.a,{to:"/create",children:Object(A.jsx)(u.a,{icon:"mdi mdi-pencil",className:"p-button-lg"})}),Object(A.jsx)("div",{className:"text-900 mb-3 font-medium",children:"Create new game"})]}),Object(A.jsxs)("div",{className:"col-12 md:col-4 mb-4 px-5",children:[Object(A.jsx)(kt.a,{to:"/play",children:Object(A.jsx)(u.a,{icon:"mdi mdi-controller-classic",className:"p-button-lg"})}),Object(A.jsx)("div",{className:"text-900 mb-3 font-medium",children:"Play Game!"})]})]})]})})},It=n(61),Mt=n.n(It),Gt=function(){var e=Object(d.c)((function(e){return e.game})).hints,t=Object(a.useState)([[],[]]),n=Object(Ue.a)(t,2),s=n[0],c=n[1],l=function(t,n,a){var s="p"+t[0]+n+a;return Object(A.jsx)("span",{className:Mt.a.possibility,children:t.map((function(t){return function(t,n){var a="d"+t+n;return e[n].used.includes(t)?Object(A.jsx)("span",{className:Mt.a.highlight,children:t},a):Object(A.jsx)("span",{children:t},a)}(t,a)}))},s)},r=function(e,t){var n="ps"+e[0]+t;return Object(A.jsx)("span",{children:e.map((function(e,n){return l(e,n,t)}))},n)},i=function(t){return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)("span",{className:Mt.a.sum,children:[e[t].sum,":"]}),r(s[t],t)]})};return Object(a.useEffect)((function(){e[0].index>-1&&c([te(e[0]),te(e[1])])}),[e]),Object(A.jsx)("div",{className:Mt.a.combinations,children:Object(A.jsxs)("div",{className:Mt.a.text,children:[Object(A.jsx)("div",{children:e&&i(0)}),Object(A.jsx)("div",{children:e&&i(1)})]})})},Ht=n(71),Ft=n.n(Ht),Pt=n(242),Bt=n.n(Pt),At=function(e){var t=e.digit,n=e.pencilMark,a=Object(d.c)((function(e){return e.game})).selectedIndex,s=Object(d.b)();return Object(A.jsx)(u.a,{className:Ye()(Bt.a.guessButton,{pencilMark:n}),onClick:function(e){t>=0&&t<=9&&a&&s(n?ve({index:a,guess:t}):ge({index:a,guess:t}))},children:t})},Dt=function(){var e=Object(d.c)((function(e){return e.game})).selectedIndex,t=Object(d.b)(),n=[1,2,3,4,5,6,7,8,9],a=function(e,t){return Object(A.jsx)(At,{digit:e,pencilMark:t},e)};return Object(A.jsxs)("aside",{className:Ye()("controls",Ft.a.controls),children:[Object(A.jsxs)("div",{className:Ft.a.guessButtons,children:[Object(A.jsx)("div",{className:Ft.a.columns,children:n.map((function(e){return a(e,!0)}))}),Object(A.jsx)("div",{className:Ft.a.columns,children:n.map((function(e){return a(e,!1)}))}),Object(A.jsx)(u.a,{className:Ye()("button","is-warning","is-large"),onClick:function(n){e&&t(ge({index:e,guess:0}))},children:"X"}),Object(A.jsx)(u.a,{className:Ye()("button is-large"),onClick:function(e){t(xe())},children:"Auto Pencil"})]}),Object(A.jsx)("div",{className:"pencilmarks"})]})},Et=n(243),Rt=n.n(Et),Vt=function(e){e.cell,e.index;return Object(A.jsx)("div",{className:Ye()("gamecell",Rt.a.blank)})},Jt=n(94),qt=n.n(Jt),Tt=function(e){var t=e.cell;e.index;return Object(A.jsxs)("div",{className:Ye()("gamecell","hintCell"),children:[Object(A.jsx)("div",{className:"horizontalHint",children:t.hintHorizontal}),Object(A.jsx)("div",{className:"verticalHint",children:t.hintVertical})]})},Lt=n(95),Ut=n.n(Lt),Kt=function(e){var t,n=e.cell,a=e.index,s=Object(d.c)((function(e){return e.game.selectedIndex})),c=Object(d.b)();return Object(A.jsxs)("div",{className:Ye()("gamecell",Ut.a.number,{selected:a===s}),onClick:function(e){c(pe(a))},children:[n.guess>0&&Object(A.jsx)("div",{className:Ye()(Ut.a.guess),children:n.guess}),!n.guess&&(null===(t=n.pencilMarks)||void 0===t?void 0:t.length)>0&&Object(A.jsx)("div",{className:Ye()(Ut.a.pencilMarks),children:n.pencilMarks.join("")})]})},Xt=function(){var e=Object(d.c)((function(e){return e.game})),t=e.game,n=e.selectedIndex,s=Object(d.b)();return Object(a.useEffect)((function(){null==t&&s(function(){var e=Object(j.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("puzzles/sample.json",{headers:{"Access-Control-Allow-Origin":"*"}});case 3:a=e.sent,n=a.data,e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return");case 10:t(fe(n));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(A.jsx)("div",{className:Ye()("main",qt.a.gameBackground),children:Object(A.jsx)("div",{className:qt.a.gamegrid,onKeyDown:function(e){n&&(e.key>="0"&&e.key<="9"?s(ge({index:n,guess:+e.key})):"Delete"===e.key?s(ge({index:n,guess:0})):console.log("Key pressed:",e.key))},tabIndex:-1,children:function(){if(t)return Object(A.jsx)("div",{className:qt.a.grid,style:{gridTemplateColumns:"repeat(".concat(t.columnCount,", 1fr)"),gridTemplateRows:"repeat(".concat(t.rowCount,", 1fr)")},children:t.cells.map((function(e,t){return function(e,t){return e.type===se.BlankCell?Object(A.jsx)(Vt,{cell:e,index:t},t):e.type===se.HintCell?Object(A.jsx)(Tt,{cell:e,index:t},t):Object(A.jsx)(Kt,{cell:e,index:t},t)}(e,t)}))})}()})})},Yt=function(){return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)("div",{className:"content",children:[Object(A.jsx)(Xt,{}),Object(A.jsx)(Dt,{})]}),Object(A.jsx)(Gt,{})]})},Qt=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.users})).user;return Object(a.useEffect)((function(){t&&i.push("/")}),[t]),Object(A.jsx)("div",{className:"flex align-items-center justify-content-center",style:{height:"60%"},children:Object(A.jsxs)("div",{className:"surface-card p-4 shadow-2 border-round w-full lg:w-6",children:[Object(A.jsxs)("div",{className:"text-center mb-5",children:[Object(A.jsx)("div",{className:"text-900 text-3xl font-medium mb-3",children:"Welcome Back to Mr K.'s Kakuro"}),Object(A.jsx)("span",{className:"text-600 font-medium line-height-3",children:"Don't have an account?"}),Object(A.jsx)(kt.a,{className:"font-medium no-underline ml-2 text-blue-500 cursor-pointer",to:"/signup",children:"Create one today!"})]}),Object(A.jsx)(bt.d,{initialValues:{email:"",password:""},onSubmit:function(t){e(function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a,s,c,l;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(H()),t.prev=1,t.next=4,x.post("/users/login",e);case 4:c=t.sent,a=c.data.user,s=c.data.token,localStorage.setItem("user",JSON.stringify(a)),localStorage.setItem("token",s),t.next=16;break;case 11:return t.prev=11,t.t0=t.catch(1),l=t.t0.response,n(M({resourceType:"users",resources:[],response:l})),t.abrupt("return");case 16:n(_(a));case 17:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()}(t))},children:function(e){e.setFieldValue,e.values;return Object(A.jsxs)(bt.c,{className:"p-fluid",children:[Object(A.jsx)(jt,{name:"email",label:"Email",as:vt.a,className:"block text-900 font-medium mb-2"}),Object(A.jsx)(jt,{name:"password",label:"Password",type:"password",as:vt.a,className:"block text-900 font-medium mb-2"}),Object(A.jsx)(u.a,{type:"submit",label:"Sign In!",icon:"mdi mdi-login-variant",className:"w-full"})]})}})]})})},Wt=Ot.b().shape({name:Ot.c().min(3).max(50,"Must be 50 characters or less").required("Required"),email:Ot.c().max(50,"Must be 50 characters or less").required("Required"),password:Ot.c().min(10,"Must be at least 10 characters").max(25,"Must be 25 characters or less").required("Required")}),Zt=function(){var e=Object(d.b)();return Object(A.jsx)("div",{className:"flex align-items-center justify-content-center",style:{height:"60%"},children:Object(A.jsxs)("div",{className:"surface-card p-4 shadow-2 border-round w-full lg:w-6",children:[Object(A.jsxs)("div",{className:"text-center mb-5",children:[Object(A.jsx)("div",{className:"text-900 text-3xl font-medium mb-3",children:"Sign Up For Mr K.'s Kakuro"}),Object(A.jsx)("span",{className:"text-600 font-medium line-height-3",children:"Already have an account?"}),Object(A.jsx)(kt.a,{className:"font-medium no-underline ml-2 text-blue-500 cursor-pointer",to:"/signin",children:"Sign In!"})]}),Object(A.jsx)(bt.d,{enableReinitialize:!0,initialValues:{name:"",email:"",password:""},onSubmit:function(t){e(function(e){return function(){var t=Object(j.a)(b.a.mark((function t(n){var a,s,c,l;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(H()),t.prev=1,t.next=4,x.post("/users",e);case 4:c=t.sent,a=c.data.user,s=c.data.token,localStorage.setItem("user",JSON.stringify(a)),localStorage.setItem("token",s),t.next=17;break;case 11:return t.prev=11,t.t0=t.catch(1),l=t.t0.response,console.log("response:",l),n(G("Unable to sign up")),t.abrupt("return");case 17:n(_(a));case 18:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()}(t)),i.push("/")},validationSchema:Wt,children:function(e){e.setFieldValue,e.values;return Object(A.jsxs)(bt.c,{className:"p-fluid",children:[Object(A.jsx)(jt,{name:"name",label:"Gamer Name",as:vt.a,className:"block text-900 font-medium mb-2"}),Object(A.jsx)(jt,{name:"email",label:"Email",as:vt.a,className:"block text-900 font-medium mb-2"}),Object(A.jsx)(jt,{name:"password",label:"Password",type:"password",as:vt.a,className:"block text-900 font-medium mb-2"}),Object(A.jsx)(u.a,{type:"submit",label:"Sign Up!",icon:"mdi mdi-account-plus",className:"w-full"})]})}})]})})},$t=n(10),en=(n(497),n(31)),tn=Object(en.b)({alerts:L,game:Oe,design:qe,users:F}),nn=Object(f.a)({devTools:!1,reducer:tn}),an=function(){return Object(A.jsxs)(d.a,{store:nn,children:[Object(A.jsx)(D,{}),Object(A.jsx)(U,{}),Object(A.jsx)($t.b,{history:i,children:Object(A.jsxs)($t.c,{children:[Object(A.jsx)($t.a,{path:"/create",children:Object(A.jsx)(Ct,{})}),Object(A.jsx)($t.a,{path:"/play",children:Object(A.jsx)(Yt,{})}),Object(A.jsx)($t.a,{path:"/signin",children:Object(A.jsx)(Qt,{})}),Object(A.jsx)($t.a,{path:"/signup",children:Object(A.jsx)(Zt,{})}),Object(A.jsx)($t.a,{path:"/",children:Object(A.jsx)(wt,{})})]})})]})},sn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,499)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,l=t.getTTFB;n(e),a(e),s(e),c(e),l(e)}))};l.a.render(Object(A.jsx)(s.a.StrictMode,{children:Object(A.jsx)(an,{})}),document.getElementById("root")),sn()},60:function(e,t,n){e.exports={button:"SaveGame_button__3Is-u"}},61:function(e,t,n){e.exports={combinations:"CombinationLine_combinations__2uXXm",text:"CombinationLine_text__3BaJ1",sum:"CombinationLine_sum__ijz9v",possibility:"CombinationLine_possibility__ru2Ma",highlight:"CombinationLine_highlight__2hWQX"}},71:function(e,t,n){e.exports={controls:"Controls_controls__fpjJI",columns:"Controls_columns__1dogA"}},92:function(e,t,n){e.exports={designCell:"DesignCell_designCell__1mdb1",hintMissing:"DesignCell_hintMissing__GjhmS",solution:"DesignCell_solution__1hCNm",index:"DesignCell_index__1hyaN"}},93:function(e,t,n){e.exports={label:"HintDialog_label__1UY5p",buttonGrid:"HintDialog_buttonGrid__3MkIY",button:"HintDialog_button__2lNtm"}},94:function(e,t,n){e.exports={gameBackground:"GameGrid_gameBackground__2gUQF",grid:"GameGrid_grid__3SI7n"}},95:function(e,t,n){e.exports={number:"NumberCell_number__1mt2Y",guess:"NumberCell_guess__1Iq08"}}},[[498,1,2]]]);
//# sourceMappingURL=main.8d770189.chunk.js.map