(this.webpackJsonpkakuro=this.webpackJsonpkakuro||[]).push([[0],{126:function(e,t,n){},135:function(e,t,n){e.exports={header:"MyMenubar_header__1SUGp",startItem:"MyMenubar_startItem__5gsTl"}},136:function(e,t,n){e.exports={createGame:"CreateGame_createGame__t-nS6",createSteps:"CreateGame_createSteps__3TBZt","p-steps":"CreateGame_p-steps__1OyM9","p-steps-item":"CreateGame_p-steps-item__2Lv77","p-menuitem-link":"CreateGame_p-menuitem-link__3yOB-","p-steps-title":"CreateGame_p-steps-title__6eRPZ"}},137:function(e,t,n){e.exports={gameBackground:"DrawGrid_gameBackground__2dTqA",grid:"DrawGrid_grid__XoYjv"}},209:function(e,t,n){},247:function(e,t,n){e.exports={content:"MainMenu_content__1zXTd"}},250:function(e,t,n){e.exports={blank:"BlankCell_blank__h84dH"}},251:function(e,t,n){e.exports={content:"PlayGame_content__3keJX"}},27:function(e,t,n){e.exports={controls:"Controls_controls__fpjJI",columns:"Controls_columns__1dogA",button:"Controls_button__3i3Ud",zoomButtons:"Controls_zoomButtons__1tiul"}},271:function(e,t){},273:function(e,t){},288:function(e,t){},290:function(e,t){},318:function(e,t){},32:function(e,t,n){e.exports={button:"SaveGame_button__3Is-u"}},320:function(e,t){},321:function(e,t){},326:function(e,t){},328:function(e,t){},334:function(e,t){},336:function(e,t){},355:function(e,t){},367:function(e,t){},370:function(e,t){},43:function(e,t,n){e.exports={combinations:"CombinationLine_combinations__2uXXm",column:"CombinationLine_column__1JW6l",text:"CombinationLine_text__3BaJ1",sum:"CombinationLine_sum__ijz9v",possibility:"CombinationLine_possibility__ru2Ma",highlight:"CombinationLine_highlight__2hWQX"}},507:function(e,t,n){},508:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),l=n(16),r=n.n(l),s=n(20),c=Object(s.b)(),o=n(5),u=n(231),d=n(3),m=n(9),b=n.n(m),f=n(22),j=n(30),g=n(233),p=n(234),h=n.n(p).a.create({baseURL:"https://kakuro-api.kuehnert.it"});var v,x=function(){var e=localStorage.getItem("token");return e?{Authorization:"Bearer ".concat(e)}:{Authorization:null}};console.log("userSlice: loading user from storage...");try{var O=localStorage.getItem("user");v=null!=O?JSON.parse(O):null;var y=localStorage.getItem("token");if(y){var N=Object(g.decode)(y);Date.now()>=1e3*N.exp&&(console.log("token expired"),localStorage.removeItem("user"),localStorage.removeItem("token"),v=null)}}catch(Un){localStorage.removeItem("user"),localStorage.removeItem("token"),v=null}var S={isLoggedIn:null!=v,isRequesting:!1,user:v,error:null},k=Object(j.b)({name:"user",initialState:S,reducers:{loginSuccess:function(e,t){e.user=t.payload,e.isLoggedIn=null!=t.payload,e.error=null,e.isRequesting=!1},logoutFailed:function(e,t){e.error=t.payload,e.user=null,e.isLoggedIn=!1,e.isRequesting=!1},logoutSuccess:function(e){e.user=null,e.isLoggedIn=!1,e.error=null,e.isRequesting=!1},signUpSuccess:function(e,t){e.user=t.payload,e.isLoggedIn=null!=t.payload,e.error=null,e.isRequesting=!1},signUpFailed:function(e,t){e.error=t.payload,e.user=null,e.isLoggedIn=!1,e.isRequesting=!1},submitting:function(e){e.isRequesting=!0},requestFailed:function(e,t){console.log("action.payload:",t.payload);var n=t.payload.response.status;401!==n&&403!==n||(localStorage.removeItem("user"),localStorage.removeItem("token"),e.user=null,e.isLoggedIn=!1,e.error=null,e.isRequesting=!1)}}}),C=k.actions,_=C.loginSuccess,z=C.logoutFailed,w=C.logoutSuccess,M=C.requestFailed,I=C.signUpFailed,G=(C.signUpSuccess,C.submitting),H=k.reducer,P=n(135),B=n.n(P),F=n(2),J=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.users})).user,n=Object(F.jsx)("div",{className:B.a.startItem,children:Object(F.jsx)("h3",{children:"Mr K.'s Kakuro"})}),a=[{label:"Menu",icon:"mdi mdi-hamburger",command:function(){return c.push("/")}},{label:"Design Puzzle",icon:"mdi mdi-pencil",command:function(){return c.push("/create")},disabled:null==t},{label:"Play Puzzle",icon:"mdi mdi-play",command:function(){return c.push("/play")}}],i=t?Object(F.jsx)(o.a,{label:"Sign Out ".concat(t.name),icon:"mdi mdi-logout",onClick:function(){return e(function(){var e=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.post("/users/logout",null,{headers:x()});case 3:e.next=10;break;case 5:return e.prev=5,e.t0=e.catch(0),n=e.t0.response,t(z(JSON.stringify(n))),e.abrupt("return");case 10:return e.prev=10,localStorage.removeItem("user"),localStorage.removeItem("token"),e.finish(10);case 14:t(w());case 15:case"end":return e.stop()}}),e,null,[[0,5,10,14]])})));return function(t){return e.apply(this,arguments)}}())}}):Object(F.jsx)(o.a,{label:"Sign Up/Sign In",icon:"mdi mdi-login",onClick:function(){return c.push("/signin")}});return Object(F.jsx)(u.a,{model:a,start:n,end:i,className:B.a.header})},D=n(254),A=Object(j.b)({name:"alerts",initialState:{alerts:{},pageTitle:null,isFetching:!1,notFound:null},reducers:{clearAlert:function(e,t){delete e.alerts[t.payload]},setAlert:function(e,t){var n=t.payload;e.alerts[n.severity]=n,e.isFetching=!1},setNotFound:function(e,t){e.notFound=t.payload},setErrorAlert:function(e,t){var n={severity:"error",summary:t.payload};e.alerts[n.severity]=n,e.isFetching=!1},setSuccessAlert:function(e,t){var n={severity:"success",summary:t.payload};e.alerts[n.severity]=n,e.isFetching=!1},setWarningAlert:function(e,t){var n={severity:"warn",summary:t.payload};e.alerts[n.severity]=n,e.isFetching=!1},setIsFetching:function(e,t){e.isFetching=t.payload},setPageTitle:function(e,t){e.pageTitle=t.payload,document.title=t.payload}}}),L=A.actions,E=L.clearAlert,R=(L.setAlert,L.setErrorAlert),V=(L.setIsFetching,L.setNotFound,L.setPageTitle,L.setSuccessAlert),T=L.setWarningAlert,q=A.reducer,U=function(){var e=Object(d.c)((function(e){return e.alerts.alerts})),t=Object(d.b)(),n=Object(a.useRef)(null);return Object(a.useEffect)((function(){Object.keys(e).forEach((function(a){var i;null===(i=n.current)||void 0===i||i.show({severity:a,summary:e[a].summary,detail:e[a].detail}),t(E(a))}))}),[t,e]),Object(F.jsx)(D.a,{ref:n})},W=n(93),K=n(235),X=n(10),Y=Object(j.b)({name:"list",initialState:{list:[],solved:[]},reducers:{fetchListSuccess:function(e,t){e.list=t.payload},fetchSolvedSuccess:function(e,t){e.solved=t.payload},addPuzzleToList:function(e,t){e.list.push(t.payload)},setChoiceID:function(e,t){e.choice=t.payload}}}),Z=Y.actions,Q=Z.addPuzzleToList,$=Z.fetchListSuccess,ee=Z.fetchSolvedSuccess,te=Z.setChoiceID,ne=Y.reducer;var ae=function(e){return e.filter((function(e){return e.type===me.NumberCell&&0===e.guess})).length};function ie(e,t){var n=[{index:-1,sum:-1,count:-1,used:new Array},{index:-1,sum:-1,count:-1,used:new Array}];if(!t)return n;for(var a=t;e.cells[a].type===me.NumberCell;){var i=e.cells[a];i.guess>0&&n[0].used.push(i.guess),a--}for(n[0].index=a,n[0].sum=e.cells[a].hintHorizontal||-1,a=t;(a+1)%e.columnCount!==0&&e.cells[a+1].type===me.NumberCell;){a++;var l=e.cells[a];l.guess>0&&n[0].used.push(l.guess)}n[0].count=a-n[0].index;for(var r=t;e.cells[r].type===me.NumberCell;){var s=e.cells[r];s.guess>0&&n[1].used.push(s.guess),r-=e.columnCount}n[1].index=r,n[1].sum=e.cells[r].hintVertical||-1;for(var c=(r=t)+e.columnCount;c<e.cells.length&&e.cells[c].type===me.NumberCell;){r=c;var o=e.cells[r];o.guess>0&&n[1].used.push(o.guess),c=r+e.columnCount}var u=(r-n[1].index)/e.columnCount;return n[1].count=u,n}var le=n(19),re=function(){for(var e={},t=new Array(10).fill(!1),n=function n(a,i){10===i?function(){for(var n=new Array,a=0,i=0,l=1;l<t.length;l++)t[l]&&(n.push(l),a+=1,i+=l);e[a]||(e[a]={}),e[a][i]||(e[a][i]=new Array),e[a][i].push(n)}():(t[i]=!0,n(a,i+1),t[i]=!1,n(a,i+1),i++)},a=1;a<9;a++)t[a]=!0,n(a,a+1),t[a]=!1;return delete e[1],e}();Object.freeze(re);var se,ce=re;function oe(e){var t=ce[e.count][e.sum];return t=t.filter((function(t){return e.used.every((function(e){return t.includes(e)}))}))}function ue(e,t){if(t>=e.cells.length){var n=JSON.parse(JSON.stringify(e));n.cells.forEach((function(e){if(e.type===me.NumberCell){var t=e;t.solution=t.guess,t.guess=0,t.pencilMarks=[]}})),se.push(n)}else{var a=e.cells[t];if(a.type!==me.NumberCell||a.guess>0)ue(e,t+1);else{var i=a,l=je(e,a.index),r=ge(e,a.index);i.pencilMarks.forEach((function(n){if(!l.usedDigits.includes(n)&&!r.usedDigits.includes(n)&&!(l.usedDigits.length===l.count-1&&l.sum+n!==l.hint||r.usedDigits.length===r.count-1&&r.sum+n!==r.hint)){i.guess=n,console.log("Cell no. ".concat(t,": Guessing ").concat(n,"..."));var a=JSON.parse(JSON.stringify(e));for(he(a);pe(a);)he(a);ue(a,t+1),i.guess=0}}))}}}var de,me,be,fe=function(e){var t=JSON.parse(JSON.stringify(e));for(he(t);pe(t);)he(t);return se=new Array,ue(t,0),0===se.length?{error:"Puzzle invalid; no solution."}:se.length>1?{error:"Puzzle invalid; more than one solution (".concat(se.length,").")}:{solution:se[0]}};function je(e,t){for(var n=e.cells,a=e.columnCount,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],l=i?1:a,r=t-l,s=[],c=[],o=0,u=0;n[r].type===me.NumberCell;)r-=l;for(var d=r;d+l<n.length&&n[d+l].type===me.NumberCell;){d+=l,s.push(d);var m=n[d];m.guess&&(c.push(m.guess),o+=m.guess),m.solution&&(u+=m.solution)}var b=i?n[r].hintHorizontal:n[r].hintVertical,f=(d-r)/l;return{index:t,hint:b,count:f,sum:o,sumSolved:u,cellIndexes:s,usedDigits:c}}function ge(e,t){return je(e,t,!1)}function pe(e){var t=!1;return e.cells.forEach((function(n){if(n.type===me.NumberCell){var a,i=n;0===i.guess&&1===(null===(a=i.pencilMarks)||void 0===a?void 0:a.length)&&(i.solution>0?i.guess=i.pencilMarks[0]:i.solution=i.pencilMarks[0],function(e,t,n){e.cells[t].guess=n,je(e,t).cellIndexes.forEach((function(t){var a=e.cells[t];a.pencilMarks=a.pencilMarks.filter((function(e){return e!==n}))})),ge(e,t).cellIndexes.forEach((function(t){var a=e.cells[t];a.pencilMarks=a.pencilMarks.filter((function(e){return e!==n}))}))}(e,i.index,i.pencilMarks[0]),t=!0)}})),t}function he(e){e.cells.forEach((function(t,n){t.type===me.NumberCell&&function(e,t,n){if(!(e.guess>0)){var a=e.pencilMarks||[],i=ie(n,t),l=oe(i[0]),r=oe(i[1]),s=[].concat(Object(le.a)(i[0].used),Object(le.a)(i[1].used)),c=Array.from(new Set(l.flat())),o=Array.from(new Set(r.flat()));if(a=c.filter((function(e){return o.includes(e)&&!s.includes(e)})).sort(),console.log("0 newPM:",a),(e.pencilMarks||[]).length>0){if(a=a.filter((function(t){return e.pencilMarks.includes(t)})),console.log("1 newPM:",a),2===i[0].count&&t+1<n.cells.length&&n.cells[t+1].type===me.NumberCell&&0===n.cells[t+1].guess){var u=n.cells[t+1];a=a.filter((function(e){return u.pencilMarks.includes(i[0].sum-e)}))}if(2===i[1].count&&t+n.columnCount<n.cells.length&&n.cells[t+n.columnCount].type===me.NumberCell&&0===n.cells[t+n.columnCount].guess){var d=n.cells[t+n.columnCount];a=a.filter((function(e){return d.pencilMarks.includes(i[1].sum-e)}))}}e.pencilMarks=a}}(t,n,e)}))}!function(e){e[e.Easy=0]="Easy",e[e.Medium=1]="Medium",e[e.MediumPlus=2]="MediumPlus",e[e.Hard=3]="Hard",e[e.VeryHard=4]="VeryHard"}(de||(de={})),function(e){e.BlankCell="blankCell",e.HintCell="hintCell",e.NumberCell="numberCell"}(me||(me={})),function(e){e[e.Raw=0]="Raw",e[e.Valid=1]="Valid",e[e.Solved=2]="Solved"}(be||(be={}));var ve={zoomLevel:6,game:{state:-1,cells:[],columnCount:-1,rowCount:-1,name:"Dummy",level:-1,hintCount:-1,missingCells:-1},hints:[{index:-1,sum:-1,count:-1,used:new Array},{index:-1,sum:-1,count:-1,used:new Array}],markWrong:JSON.parse(localStorage.getItem("kakuro-markWrong")||"false"),undoStack:[],redoStack:[]},xe=Object(j.b)({name:"game",initialState:ve,reducers:{setGameState:function(e,t){e.game=t.payload,e.hints=ie(e.game,e.selectedIndex),e.undoStack=[],e.redoStack=[]},setCurrentGameSuccess:function(e,t){e.undoStack=[],e.redoStack=[],e.game=t.payload,e.game.missingCells=ae(e.game.cells),e.hints=ie(e.game,e.selectedIndex),localStorage.setItem("currentGame",JSON.stringify(e.game))},setSelectedIndex:function(e,t){var n=t.payload;e.selectedIndex=n,e.hints=ie(e.game,n)},increaseZoom:function(e,t){var n=t.payload;if(0===n)e.zoomLevel=ve.zoomLevel;else{var a=e.zoomLevel+n;a>=3&&a<=10&&(e.zoomLevel=a)}},setGuessSuccess:function(e,t){e.undoStack.push(JSON.stringify(e.game)),e.redoStack=[];var n=t.payload,a=n.newGame,i=n.newMissingCells;e.game=a,e.game.missingCells=i,e.hints=ie(a,e.selectedIndex),localStorage.setItem("currentGame",JSON.stringify(e.game))},togglePencilMark:function(e,t){e.undoStack.push(JSON.stringify(e.game)),e.redoStack=[];var n=t.payload,a=n.index,i=n.guess,l=JSON.parse(JSON.stringify(e.game)),r=l.cells[a];if(r.type===me.NumberCell){var s=r.pencilMarks.indexOf(i);0===i?r.pencilMarks=[]:s<0?(r.pencilMarks.push(i),r.pencilMarks.sort()):r.pencilMarks.splice(s,1),e.game=l,localStorage.setItem("currentGame",JSON.stringify(e.game))}},resetGame:function(e){e.undoStack.push(JSON.stringify(e.game)),e.redoStack=[],e.game=function(e){var t=JSON.parse(JSON.stringify(e));return t.cells.filter((function(e){return e.type===me.NumberCell})).forEach((function(e){e.guess=0,e.pencilMarks=[]})),t}(e.game),e.game.missingCells=ae(e.game.cells),e.hints=ie(e.game,e.selectedIndex)},toggleMarkWrong:function(e){e.markWrong=!e.markWrong,localStorage.setItem("kakuro-markWrong",JSON.stringify(e.markWrong))},clearPencilMarks:function(e){e.undoStack.push(JSON.stringify(e.game)),e.redoStack=[],e.game=function(e){var t=JSON.parse(JSON.stringify(e));return t.cells.filter((function(e){return e.type===me.NumberCell})).forEach((function(e){e.pencilMarks=[]})),t}(e.game)},autoPencil:function(e){e.undoStack.push(JSON.stringify(e.game)),pe(e.game),he(e.game),e.game.missingCells=ae(e.game.cells)},undo:function(e){var t=e.undoStack.pop(),n=JSON.parse(t);e.redoStack.push(JSON.stringify(e.game)),e.game=n,e.hints=ie(e.game,e.selectedIndex)},redo:function(e){var t=e.redoStack.pop(),n=JSON.parse(t);e.undoStack.push(JSON.stringify(e.game)),e.game=n,e.hints=ie(e.game,e.selectedIndex)}}}),Oe=xe.actions,ye=Oe.clearPencilMarks,Ne=Oe.increaseZoom,Se=Oe.setGameState,ke=Oe.setSelectedIndex,Ce=Oe.setCurrentGameSuccess,_e=Oe.setGuessSuccess,ze=Oe.autoPencil,we=Oe.resetGame,Me=Oe.togglePencilMark,Ie=Oe.toggleMarkWrong,Ge=Oe.redo,He=Oe.undo,Pe=xe.reducer,Be=function(e){return function(){var t=Object(f.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(a=JSON.parse(JSON.stringify(e))).cells.filter((function(e){return e.type===me.NumberCell})).forEach((function(e){var t=e;t.guess||(t.guess=0),t.pencilMarks||(t.pencilMarks=[])})),n(Ce(a));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Fe=function(e){var t=e.index,n=e.guess;return function(){var e=Object(f.a)(b.a.mark((function e(a,i){var l,r,s,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=i().game.game,r=JSON.parse(JSON.stringify(l)),(s=r.cells[t]).type!==me.NumberCell){e.next=22;break}if(c=0===s.guess&&0!==n?l.missingCells-1:s.guess>0&&0===n?l.missingCells+1:l.missingCells,s.guess=n,0!==c){e.next=21;break}if(!De(r)){e.next=20;break}if(!l._id||!i().users.user){e.next=17;break}return e.prev=9,e.next=12,h.post("/users/solved",{id:l._id},{headers:x()});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.error(e.t0);case 17:a(V("Puzzle solved. Congratulations!")),e.next=21;break;case 20:a(T("There are still mistakes in the puzzle"));case 21:a(_e({newGame:r,newMissingCells:c}));case 22:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t,n){return e.apply(this,arguments)}}()};function Je(e){var t=e.cells,n=0,a=0;return t.filter((function(e){return e.type===me.HintCell})).every((function(e){var t=e;return t.hintHorizontal&&(n+=t.hintHorizontal),t.hintVertical&&(a+=t.hintVertical),(!t.hintHorizontal||t.hintHorizontal>-1)&&(!t.hintVertical||t.hintVertical>-1)}))?n!==a?{valid:!1,error:"Hints across: ".concat(n,", down: ").concat(a,". Must be equal.")}:{valid:!0}:{valid:!1,error:"Not all hints provided."}}function De(e){return e.cells.filter((function(e){return e.type===me.NumberCell})).every((function(e){return e.guess===e.solution}))}function Ae(e){return e.cells.filter((function(e){return e.type===me.NumberCell})).every((function(e){return e.solution>0}))}function Le(e){for(var t=e.cells,n=0,a=0;a<t.length-1;a++){var i=t[a],l=a+1,r=a+e.columnCount;if(i.type===me.BlankCell)t[l].type===me.NumberCell&&(i.type=me.HintCell,i.hintHorizontal=-1,n+=1),r<t.length&&t[r].type===me.NumberCell&&(i.type=me.HintCell,i.hintVertical=-1,n+=1);else if(i.type===me.HintCell){var s=i,c=!1;t[l].type===me.NumberCell&&(-1===s.hintHorizontal&&(n+=1),c=!0),r<t.length&&t[r].type===me.NumberCell&&(-1===s.hintVertical&&(n+=1),c=!0),c||(i.type=me.BlankCell)}}e.hintCount=n}var Ee=n(236),Re=["cells"];var Ve=function(e){var t=e.cells.map((function(e){return e.type!==me.NumberCell?0:e.solution})).join(""),n=(e.cells,Object(Ee.a)(e,Re));return Object(X.a)(Object(X.a)({},n),{},{cellString:t})};var Te,qe,Ue=function(e){for(var t=e.cells,n=0,a=0;a<t.length;a++){var i=t[a];if(i.type===me.NumberCell){if(n+=1,1===je(e,i.index).count)return{valid:!1,message:"There is at least one group across with only one cell"};if(1===ge(e,i.index).count)return{valid:!1,message:"There is at least one group down with only one cell"}}}return n<3?{valid:!1,message:"Too few number cells"}:{valid:!0,message:"Puzzle grid is fine"}};!function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical",e[e.Both=2]="Both"}(Te||(Te={})),function(e){e[e.SetSize=0]="SetSize",e[e.DrawGrid=1]="DrawGrid",e[e.InsertHints=2]="InsertHints",e[e.CheckPuzzle=3]="CheckPuzzle"}(qe||(qe={}));var We=[{label:"Set Size"},{label:"Draw Grid"},{label:"Insert Hints"},{label:"Check Puzzle"}],Ke=function(e,t){return Array.from({length:e*t},(function(e,t){return{index:t,type:me.BlankCell}}))},Xe={activeStep:0,puzzle:{name:"Unnamed",level:4,columnCount:10,rowCount:10,cells:Ke(10,10),state:be.Raw,hintCount:-1,missingCells:-1}},Ye=Object(j.b)({name:"design",initialState:Xe,reducers:{setActiveStep:function(e,t){e.activeStep=t.payload,localStorage.setItem("puzzleState",JSON.stringify(e))},setBaseGame:function(e,t){e.puzzle=Object(X.a)(Object(X.a)({},e.puzzle),t.payload),e.puzzle.cells=Ke(e.puzzle.columnCount,e.puzzle.rowCount)},clearDesignGame:function(){return localStorage.removeItem("puzzleState"),Xe},setPuzzleState:function(e,t){var n=t.payload;n.activeStep=qe.DrawGrid;var a=n.puzzle;Ue(a).valid&&(n.activeStep=qe.InsertHints,Je(a).valid&&(n.activeStep=qe.CheckPuzzle));return n},updateCell:function(e,t){var n=t.payload;n.type!==me.NumberCell||n.guess||(n.guess=0),e.puzzle.cells[n.index]=n,e.puzzle.state=be.Raw,e.puzzle.hintCount=e.puzzle.cells.reduce((function(e,t){if(t.type!==me.HintCell)return e;var n=t;return e+(-1===n.hintHorizontal?1:0)+(-1===n.hintVertical?1:0)}),0)},makeHintCells:function(e){Le(e.puzzle)},solveGameSuccess:function(e,t){e.puzzle=t.payload,e.puzzle.state=be.Solved},solveGameFailed:function(e){e.puzzle.cells.filter((function(e){return e.type===me.NumberCell})).forEach((function(e){return e.solution=0})),e.puzzle.state=be.Raw,e.activeStep=qe.InsertHints},checkGameSuccess:function(e){e.puzzle.state=be.Valid},createGameSuccess:function(){return localStorage.removeItem("puzzleState"),Xe}}}),Ze=Ye.actions,Qe=(Ze.checkGameSuccess,Ze.clearDesignGame),$e=Ze.createGameSuccess,et=Ze.setActiveStep,tt=Ze.setBaseGame,nt=Ze.setPuzzleState,at=Ze.makeHintCells,it=Ze.solveGameSuccess,lt=Ze.solveGameFailed,rt=Ze.updateCell,st=Ye.reducer,ct=n(136),ot=n.n(ct),ut=n(7),dt=n.n(ut),mt=n(15),bt=n(237),ft=n.n(bt),jt=n(46),gt=n(94),pt=n(32),ht=n.n(pt),vt=function(){var e=Object(a.useState)(!1),t=Object(mt.a)(e,2),n=t[0],i=t[1],l=Object(a.useState)(""),r=Object(mt.a)(l,2),s=r[0],c=r[1],u=Object(d.c)((function(e){return e.design})).puzzle;Object(a.useEffect)((function(){c(JSON.stringify(u))}),[u]);return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(o.a,{label:"Export Puzzle",icon:"mdi mdi-export",onClick:function(){return i(!0)},className:ht.a.button}),Object(F.jsxs)(jt.a,{header:"Spiel exportieren",visible:n,style:{width:"50vw",height:"70vh"},modal:!0,onHide:function(){return i(!1)},children:[Object(F.jsx)(gt.a,{rows:8,style:{width:"100%",height:"calc(100% - 48px)"},value:s}),Object(F.jsx)(o.a,{icon:"mdi mdi-download",label:"Download",className:ht.a.button,onClick:function(){var e=new Blob([s]),t="kakuro-".concat(u.columnCount,"x").concat(u.rowCount,".json");ft()(e,t)}}),Object(F.jsx)(o.a,{icon:"mdi mdi-close",label:"Cancel",className:ht.a.button,onClick:function(){return i(!1)}})]})]})},xt=function(e){var t=e.handleBack,n=e.handleNext,a=e.children,i=Object(d.c)((function(e){return e.design})).activeStep;return Object(F.jsx)(W.a,{headerTemplate:function(e){var a="".concat(e.className," p-jc-start"),l="".concat(e.titleClassName," p-pl-1");return Object(F.jsxs)("div",{className:a,children:[Object(F.jsxs)("span",{className:l,children:["Step ",i+1,": ",We[i].label]}),Object(F.jsxs)("span",{className:l,children:[Object(F.jsx)(vt,{}),Object(F.jsx)(o.a,{label:"Back",icon:"mdi mdi-arrow-left",onClick:t,disabled:null==t,type:"button"}),Object(F.jsx)(o.a,{label:"Next",icon:"mdi mdi-arrow-right",onClick:n,disabled:null==n,type:"button"})]})]})},children:a})},Ot=(n(126),n(209),n(76)),yt=n.n(Ot),Nt=n(77),St=n.n(Nt),kt=function(e){var t=e.cell,n=e.across,i=e.down,l=e.visible,r=e.onHide,s=Object(d.c)((function(e){return e.design})).puzzle,c=Object(a.useState)([]),u=Object(mt.a)(c,2),m=u[0],b=u[1],f=Object(d.b)(),j=function(e){var n=je(s,t.index+(e?1:s.columnCount),e),a=Object.keys(ce[n.count]).map((function(e){return+e})),l=Math.min.apply(Math,Object(le.a)(a)),c=Math.max.apply(Math,Object(le.a)(a));return Object(F.jsxs)("div",{className:"",children:[Object(F.jsx)("div",{className:St.a.label,children:e?"Across":"Down"}),Object(F.jsx)("div",{className:St.a.buttonGrid,children:m.map((function(n){return Object(F.jsx)(o.a,{label:n<l||n>c?"":""+n,onClick:function(){return function(e,n){var a=Object(X.a)(Object(X.a)({},t),{},{type:me.HintCell});n?a.hintHorizontal=e:a.hintVertical=e,f(rt(a)),n&&i||r()}(n,e)},disabled:n<l||n>c,className:dt()("p-button-rounded",St.a.button,e?"p-button-success":"p-button-info")},n)}))})]})};return Object(a.useEffect)((function(){var e=Array.from({length:46},(function(e,t){return t}));b(e)}),[]),Object(F.jsxs)(jt.a,{className:St.a.dialog,header:"Set number(s) for hint cell",visible:l,modal:!0,onHide:r,children:[n&&j(!0),i&&j(!1)]})},Ct=function(e){var t,n=e.cell,i=(e.index,Object(d.c)((function(e){return e.design})).activeStep),l=Object(d.b)(),r=Object(a.useState)(!1),s=Object(mt.a)(r,2),c=s[0],o=s[1],u=function(e){if(e){var t=e>0?e:"?",n=e>0?"":yt.a.hintMissing;return Object(F.jsx)("div",{className:n,children:t})}return null},m=n.type===me.NumberCell?null===(t=n.pencilMarks)||void 0===t?void 0:t.join(""):null;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)("div",{className:dt()(yt.a.designCell,n.type),onClick:function(e){if(i===qe.DrawGrid){var t=Object(X.a)(Object(X.a)({},n),{},{type:n.type===me.NumberCell?me.BlankCell:me.NumberCell});l(rt(t))}else 2===i&&n.type===me.HintCell&&o(!0)},children:[Object(F.jsx)("div",{className:"horizontalHint",children:u(n.hintHorizontal)}),Object(F.jsx)("div",{className:"verticalHint",children:u(n.hintVertical)}),Object(F.jsx)("div",{className:yt.a.solution,children:n.solution}),m&&Object(F.jsx)("div",{className:yt.a.pencilmarks,children:m})]}),i===qe.InsertHints&&Object(F.jsx)(kt,{cell:n,visible:c,onHide:function(){o(!1)},across:null!=n.hintHorizontal,down:null!=n.hintVertical})]})},_t=n(137),zt=n.n(_t),wt=function(){var e=Object(d.c)((function(e){return e.design})).puzzle,t=e.columnCount,n=e.cells;return Object(F.jsx)("div",{children:Object(F.jsx)("div",{className:zt.a.gameBackground,children:Object(F.jsx)("div",{className:zt.a.grid,style:{gridTemplateColumns:"repeat(".concat(t,", 1fr)")},children:n.map((function(e,t){return Object(F.jsx)(Ct,{index:t,cell:e},t)}))})})})},Mt=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.design})),n=t.activeStep,i=t.puzzle;return Object(a.useEffect)((function(){}),[]),Object(F.jsxs)(xt,{handleBack:function(){e(et(n-1))},children:[Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(o.a,{label:"Solve Step",icon:"mdi mdi-brain",onClick:function(){var t=JSON.parse(JSON.stringify(i));he(t),pe(t),Ae(t)&&(t.state=be.Solved),e(nt({puzzle:t,activeStep:n}))},className:ht.a.button}),Object(F.jsx)(o.a,{label:"Solve Multiple",icon:"mdi mdi-brain",onClick:function(){var t=JSON.parse(JSON.stringify(i));for(he(t);pe(t);)he(t);Ae(t)&&(t.state=be.Solved),e(nt({puzzle:t,activeStep:n}))},className:ht.a.button}),Object(F.jsx)(o.a,{label:"Solve Puzzle",icon:"mdi mdi-brain",onClick:function(){e(function(){var e=Object(f.a)(b.a.mark((function e(t,n){var a,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n().design.puzzle,(i=fe(a)).error?(t(R("Puzzle invalid: ".concat(i.error))),t(lt())):(t(V("Puzzle solved.")),t(it(i.solution)));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},className:ht.a.button}),Object(F.jsx)(o.a,{label:"Send to Server & Play",icon:"mdi mdi-send",onClick:function(){var t;e((t=i,function(){var e=Object(f.a)(b.a.mark((function e(n){var a,i,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ve(t),e.prev=1,e.next=4,h.post("/puzzles",a,{headers:x()});case 4:l=e.sent,i=l.data,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(1),console.log("error:",JSON.stringify(e.t0,null,4)),n(R("Error: Puzzle is already in database")),e.abrupt("return");case 13:n(Q(i)),n($e()),n(V("Puzzle erzeugt."));case 16:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()))},className:ht.a.button,disabled:i.state!==be.Solved}),Object(F.jsx)(o.a,{label:"Play Locally",icon:"mdi mdi-play",onClick:function(){e(Be(i)),c.push("/play")},className:ht.a.button}),Object(F.jsx)(o.a,{label:"Start Over",icon:"mdi mdi-restart",onClick:function(){e(Qe())},className:dt()(ht.a.button,"p-button-warning","p-button-success")})]}),Object(F.jsx)(wt,{})]})},It=function(){var e=Object(d.c)((function(e){return e.design})),t=e.activeStep,n=e.puzzle,a=Object(d.b)();return Object(F.jsx)(xt,{handleBack:function(){a(et(t-1))},handleNext:function(){var e=Ue(n);e.valid?a(et(t+1)):a(R(e.message))},children:Object(F.jsx)(wt,{})})},Gt=function(){var e=Object(d.c)((function(e){return e.design})),t=e.activeStep,n=e.puzzle,i=Object(d.b)();Object(a.useEffect)((function(){i(at())}));return Object(F.jsxs)(xt,{handleNext:function(){var e=Je(n);e.valid?i(et(t+1)):i(R(e.error||"Error in puzzle"))},handleBack:function(){i(et(t-1))},children:[Object(F.jsx)(wt,{}),Object(F.jsxs)("div",{className:"notes",children:["Missing hints: ",n.hintCount]})]})},Ht=n(31),Pt=function(e){var t=e.label,n=e.name,a=e.hint;return Object(F.jsxs)("div",{className:"field grid",children:[Object(F.jsx)("label",{htmlFor:n,className:"col-12 mb-2 md:col-2 md:mb-0",children:t}),Object(F.jsxs)("div",{className:"col-12 md:col-10",children:[Object(F.jsx)(Ht.b,Object(X.a)(Object(X.a)({},e),{},{className:"inputfield w-full"})),a&&Object(F.jsx)("div",{dangerouslySetInnerHTML:{__html:a}}),Object(F.jsx)(Ht.a,{name:n,component:"div",className:"fieldErrorMessage"})]})]})},Bt=n(240),Ft=function(e){var t=e.values,n=e.field,a=e.label,i=e.options,l=e.setFieldValue;return Object(F.jsxs)("div",{className:"field grid",children:[Object(F.jsx)("label",{htmlFor:n,className:"col-12 mb-2 md:col-2 md:mb-0",children:a}),Object(F.jsx)("div",{className:"col-12 md:col-10",children:Object(F.jsx)(Bt.a,{id:n,value:t[n],options:i,onChange:function(e){return function(e){l(n,e.value)}(e)},className:"justify-content-start"})})]})},Jt=n(241),Dt=n(242),At=function(e){var t=e.values,n=e.field,a=e.label,i=e.setFieldValue,l=e.min,r=e.max,s=function(e){i(n,e.value)};return Object(F.jsxs)("div",{className:"field grid",children:[Object(F.jsx)("label",{htmlFor:n,className:"col-12 mb-2 md:col-2 md:mb-0",children:a}),Object(F.jsxs)("div",{className:"col-12 md:col-10",children:[Object(F.jsx)(Jt.a,{value:t[n],onChange:function(e){return s(e)},className:"inputfield w-full"}),Object(F.jsx)(Dt.a,{id:n,value:t[n],onChange:function(e){return s(e)},min:l,max:r,className:"inputfield w-full"})]})]})},Lt=n(25),Et={0:"Easy",1:"Medium",2:"Medium Plus",3:"Hard",4:"Very Hard"},Rt=[{label:"Easy",value:0},{label:"Medium",value:1},{label:"Medium Plus",value:2},{label:"Hard",value:3},{label:"Very Hard",value:4}],Vt=n(33),Tt=n(253),qt=n(64),Ut=n.n(qt),Wt=function(){var e=Object(a.useState)(!1),t=Object(mt.a)(e,2),n=t[0],i=t[1],l=Object(a.useState)(""),r=Object(mt.a)(l,2),s=r[0],c=r[1],u=Object(d.b)(),m=Object(a.useCallback)((function(e){e.forEach((function(e){var t=new FileReader;t.onabort=function(){return console.log("file reading was aborted")},t.onerror=function(){return console.log("file reading has failed")},t.onload=function(){t.result&&c(t.result)},t.readAsText(e)}))}),[]),b=Object(Tt.a)({onDrop:m}),f=b.getRootProps,j=b.getInputProps,g=b.isDragActive;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(o.a,{label:"Import Puzzle",icon:"mdi mdi-import",onClick:function(){return i(!0)},className:Ut.a.button}),Object(F.jsxs)(jt.a,{header:"Spiel importieren",visible:n,className:Ut.a.dialog,modal:!0,onHide:function(){return i(!1)},children:[Object(F.jsxs)("div",Object(X.a)(Object(X.a)({},f()),{},{children:[Object(F.jsx)("input",Object(X.a)({},j())),g?Object(F.jsx)("p",{children:"Drop the files here ..."}):Object(F.jsx)(F.Fragment,{children:Object(F.jsx)("p",{children:"Drag 'n' drop some files here, or click to select files"})}),Object(F.jsx)(gt.a,{className:dt()(Ut.a.textarea,g&&Ut.a.dragging),value:s,onChange:function(e){return c(e.target.value)}})]})),Object(F.jsx)(o.a,{label:"Import",onClick:function(e){var t=JSON.parse(s);i(!1),u(nt({activeStep:1,puzzle:t}))},disabled:""===s,className:Ut.a.button})]})]})},Kt=Vt.b().shape({name:Vt.c().max(50,"Must be 50 characters or less").required("Required"),level:Vt.a().min(0).max(4).required(),columnCount:Vt.a().min(4,"Must be between ".concat(4," and 30")).max(30).required("Required"),rowCount:Vt.a().min(4,"Must be between ".concat(4," and 30")).max(30).required("Required")}),Xt=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.design})),n=t.activeStep,i=t.puzzle,l=Object(a.useRef)(null),r=function(){l.current&&l.current.handleSubmit(),e(et(n+1))};return Object(F.jsx)(Ht.d,{enableReinitialize:!0,initialValues:i,onSubmit:function(t){e(tt(t))},validationSchema:Kt,innerRef:l,children:function(e){var t=e.setFieldValue,n=e.values;return Object(F.jsxs)(xt,{handleNext:r,children:[Object(F.jsx)("h1",{children:"Import Puzzle"}),Object(F.jsx)(Wt,{}),Object(F.jsx)("h1",{children:"\u2026Or Create Puzzle"}),Object(F.jsxs)(Ht.c,{children:[Object(F.jsx)(Pt,{name:"name",label:"Puzzle Name",as:Lt.a}),Object(F.jsx)(Ft,{field:"level",label:"Difficulty",setFieldValue:t,options:Rt,values:n}),Object(F.jsx)(At,{field:"columnCount",label:"Columns Across",setFieldValue:t,min:4,max:40,values:n}),Object(F.jsx)(At,{field:"rowCount",label:"Rows Down",setFieldValue:t,min:4,max:40,values:n})]})]})}})},Yt=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.design})).activeStep;return Object(a.useEffect)((function(){var t=localStorage.getItem("puzzleState");if(t){console.log("Found puzzle in local storage");var n=JSON.parse(t);e(nt(n))}}),[e]),Object(F.jsxs)("div",{className:ot.a.createGame,children:[Object(F.jsx)(W.a,{header:"Create a new Kakuro puzzle",children:Object(F.jsx)("div",{className:ot.a.createSteps,children:Object(F.jsx)(K.a,{model:We,activeIndex:t})})}),0===t&&Object(F.jsx)(Xt,{}),1===t&&Object(F.jsx)(It,{}),2===t&&Object(F.jsx)(Gt,{}),3===t&&Object(F.jsx)(Mt,{})]})},Zt=n(510),Qt=n(49),$t=n(255),en=function(){var e=Object(d.c)((function(e){return e.users})).user,t=Object(d.c)((function(e){return e.list})),n=t.list,i=t.choice,l=t.solved,r=Object(d.b)(),s=n&&e?n.filter((function(e){return!l.includes(e._id)})):n;Object(a.useEffect)((function(){r(function(){var e=Object(f.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.get("/puzzles");case 3:a=e.sent,n=a.data,e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("error:",e.t0),t(R("Puzzles konnten nicht geladen werden."));case 11:t($(n));case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),e&&r(function(){var e=Object(f.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.get("/users/solved",{headers:x()});case 3:a=e.sent,n=a.data,e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("error:",e.t0),t(R("Liste gel\xf6ster Puzzles konnten nicht geladen werden."));case 11:t(ee(n));case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())}),[r,e]);return Object(F.jsxs)($t.a,{value:s,autoLayout:!0,stripedRows:!0,className:"p-datatable-sm",scrollable:!0,scrollHeight:"60vh",selectionMode:"single",selection:i,onSelectionChange:function(e){return r(te(e.value))},dataKey:"_id",style:{width:"80vw"},stateStorage:"local",stateKey:"kakuro-puzzle-list",children:[Object(F.jsx)(Qt.a,{field:"name",header:"Puzzle name",sortable:!0}),Object(F.jsx)(Qt.a,{field:"level",header:"Difficulty",body:function(e){return Et[e.level]},filter:!0,sortable:!0}),Object(F.jsx)(Qt.a,{field:"columnCount",header:"Columns",sortable:!0}),Object(F.jsx)(Qt.a,{field:"rowCount",header:"Rows",sortable:!0}),Object(F.jsx)(Qt.a,{field:"creatorName",header:"Creator",filter:!0,sortable:!0}),Object(F.jsx)(Qt.a,{field:"createdAt",header:"Date",body:function(e){return t=new Date(e.createdAt),Object(Zt.a)(t,"dd-MM-yyyy");var t},sortable:!0}),e&&l&&Object(F.jsx)(Qt.a,{field:"solved",header:"Solved",body:function(e){return e._id?l.includes(e._id)?Object(F.jsx)("i",{className:"mdi mdi-check"}):"":"Unknown"}})]})},tn=n(98);var nn=function(e){var t,n=e.cellString.split("").map((function(e,t){return+e>=1&&+e<=9?{index:t,type:me.NumberCell,guess:0,solution:+e,pencilMarks:[]}:{index:t,type:me.BlankCell}})),a=Object(X.a)(Object(X.a)({},e),{},{cells:n,state:be.Solved,hintCount:-1,missingCells:ae(n)});return Le(a),(t=a).cells.filter((function(e){return e.type===me.HintCell})).forEach((function(e){var n=e;if(-1===n.hintHorizontal){var a=je(t,n.index+1);n.hintHorizontal=a.sumSolved}if(-1===n.hintVertical){var i=ge(t,n.index+t.columnCount);n.hintVertical=i.sumSolved}})),a},an=n(247),ln=n.n(an),rn=[{label:" 8x8",value:"8x8"},{label:"10x10",value:"10x10"},{label:"13x10",value:"10x13"},{label:"13x13",value:"13x13"},{label:"15x15",value:"15x15"},{label:"20x20",value:"20x20"},{label:"25x25",value:"25x25"},{label:"30x15",value:"15x30"},{label:"30x30",value:"30x30"}],sn=function(){var e=Object(d.c)((function(e){return e.list})).choice,t=Object(a.useState)("20x20"),n=Object(mt.a)(t,2),i=n[0],l=n[1],r=Object(d.b)();return Object(F.jsx)("div",{className:ln.a.content,children:Object(F.jsxs)("div",{className:dt()("text-center"),children:[Object(F.jsxs)("div",{className:"mb-3 font-bold text-2xl",children:[Object(F.jsx)("span",{className:"text-900",children:"The best "}),Object(F.jsx)("span",{className:"text-blue-600",children:"Kakuro Game "}),Object(F.jsx)("span",{className:"text-900",children:"money can buy"})]}),Object(F.jsx)("div",{className:"text-700 text-sm mb-6",children:"All of this is work in progress, so be patient and stay tuned."}),Object(F.jsxs)("div",{className:"flex flex-row justify-content-center",children:[Object(F.jsx)(tn.a,{value:i,options:rn,onChange:function(e){return l(e.value)},placeholder:"Select a Grid Size"}),Object(F.jsx)(o.a,{label:"Fetch game",icon:"mdi mdi-download-network",className:"p-button-lg",onClick:function(){var e;r((e=i,function(){var t=Object(f.a)(b.a.mark((function t(n){var a,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.post("/puzzles/steal",{size:e},{headers:x()});case 3:i=t.sent,a=i.data,t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("error:",t.t0),n(R("Fehler beim Importieren eines Puzzles."));case 11:n(Q(a));case 12:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()))}}),Object(F.jsx)(o.a,{label:"Create game",icon:"mdi mdi-pencil",className:"p-button-lg",onClick:function(e){return c.push("/create")}}),Object(F.jsx)(o.a,{label:"Play Game!",icon:"mdi mdi-controller-classic",className:"p-button-lg",onClick:function(){var t=nn(e);r(Be(t)),c.push("/play")},disabled:!e})]}),Object(F.jsx)("div",{className:"",children:Object(F.jsx)(en,{})})]})})};var cn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,i=Object(a.useRef)();Object(a.useEffect)((function(){i.current=t}),[t]),Object(a.useEffect)((function(){if(n&&n.addEventListener){var t=function(e){return i.current(e)};return n.addEventListener(e,t),function(){n.removeEventListener(e,t)}}}),[e,n])},on=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.game})),n=t.game,i=t.selectedIndex,l=n.cells,r=function(t){t>n.columnCount&&t<l.length&&l[t].type===me.NumberCell&&e(ke(t))},s=Object(a.useCallback)((function(t){var a=t.key;i&&("ArrowUp"===a&&n?r(i-n.columnCount):"ArrowDown"===a&&n?r(i+n.columnCount):"ArrowLeft"===a&&n?r(i-1):"ArrowRight"===a&&n?r(i+1):a>="0"&&a<="9"?e(Fe({index:i,guess:+a})):"Delete"===a?e(Fe({index:i,guess:0})):console.log("Key pressed:",a))}),[i]);return cn("keydown",s),Object(F.jsx)(F.Fragment,{})},un=n(43),dn=n.n(un),mn=function(){var e=Object(d.c)((function(e){return e.game})).hints,t=Object(a.useState)([[],[]]),n=Object(mt.a)(t,2),i=n[0],l=n[1],r=function(t,n,a){var i="p"+t[0]+n+a;return Object(F.jsx)("div",{className:dn.a.possibility,children:t.map((function(t){return function(t,n){var a="d"+t+n;return e[n].used.includes(t)?Object(F.jsx)("span",{className:dn.a.highlight,children:t},a):Object(F.jsx)("span",{children:t},a)}(t,a)}))},i)},s=function(e,t){var n="ps"+e[0]+t;return Object(F.jsx)("div",{children:e.map((function(e,n){return r(e,n,t)}))},n)},c=function(t){return e[t].sum<0?"\xa0":Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)("div",{className:dn.a.sum,children:[e[t].sum,0===t?"a":"d"]}),s(i[t],t)]})};return Object(a.useEffect)((function(){e[0].index>-1&&l([oe(e[0]),oe(e[1])])}),[e]),Object(F.jsxs)("div",{className:dn.a.combinations,children:[Object(F.jsx)("div",{className:dn.a.column,children:Object(F.jsx)("div",{className:dn.a.text,children:c(0)})}),Object(F.jsx)("div",{className:dn.a.column,children:Object(F.jsx)("div",{className:dn.a.text,children:c(1)})})]})},bn=n(248),fn=n(249),jn=n(27),gn=n.n(jn),pn=n(65),hn=n.n(pn),vn=function(e){var t=e.digit,n=e.pencilMark,a=Object(d.c)((function(e){return e.game})).selectedIndex,i=Object(d.b)();return Object(F.jsx)("div",{className:dt()(hn.a.guessButton,n&&hn.a.pencilMark,hn.a.pencilMark1),onClick:function(e){t>=0&&t<=9&&a&&i(n?Me({index:a,guess:t}):Fe({index:a,guess:t}))},children:Object(F.jsx)("div",{className:dt()(hn.a.digit,n&&hn.a["digit".concat(t)]),children:t})})},xn=function(){var e=Object(d.c)((function(e){return e.game})),t=e.selectedIndex,n=e.zoomLevel,a=e.markWrong,i=e.game,l=e.undoStack,r=e.redoStack,s=Object(d.b)(),c=[1,2,3,4,5,6,7,8,9],u=function(e){return s(Ne(e))},m=function(e,t){return Object(F.jsx)(vn,{digit:e,pencilMark:t},e)};return Object(F.jsxs)("aside",{className:dt()("controls",gn.a.controls),children:[Object(F.jsxs)("div",{className:gn.a.zoomButtons,children:[Object(F.jsx)(o.a,{className:"p-button-lg",icon:"mdi mdi-magnify-minus",onClick:function(){return u(-1)},disabled:n<1}),Object(F.jsx)(o.a,{className:"p-button-lg",label:"100 %",onClick:function(){return u(0)}}),Object(F.jsx)(o.a,{className:"p-button-lg",icon:"mdi mdi-magnify-plus",onClick:function(){return u(1)},disabled:n>10})]}),Object(F.jsxs)("div",{className:gn.a.guessButtons,children:[Object(F.jsx)("div",{className:gn.a.columns,children:c.map((function(e){return m(e,!0)}))}),Object(F.jsx)(o.a,{className:dt()("button","is-warning","is-large",gn.a.button),icon:"mdi mdi-pencil-off",label:"Delete",onClick:function(e){t&&s(Me({index:t,guess:0}))}}),Object(F.jsx)(o.a,{className:dt()("button is-large",gn.a.button),onClick:function(e){s(ze())},label:"Auto Pencil",icon:"mdi mdi-pencil"}),Object(F.jsx)(o.a,{className:dt()("button is-large",gn.a.button),onClick:function(e){s(ye())},label:"Clear Pencil Marks",icon:"mdi mdi-pencil-off"}),Object(F.jsx)("div",{className:gn.a.columns,children:c.map((function(e){return m(e,!1)}))}),Object(F.jsx)(o.a,{className:dt()("button","is-warning","is-large",gn.a.button),icon:"mdi mdi-delete",label:"Delete",onClick:function(e){t&&s(Fe({index:t,guess:0}))}}),Object(F.jsx)(o.a,{className:dt()("button","p-warning-button","is-large",gn.a.button),icon:"mdi mdi-restart",label:"Start Over",onClick:function(e){Object(bn.a)({message:"Are you sure you want to start over?",header:"Warning",icon:"pi pi-exclamation-triangle",accept:function(){return s(we())}})}})]}),Object(F.jsx)("div",{className:"",children:i.state===be.Solved&&Object(F.jsx)(fn.a,{checked:a,onLabel:"Show mistakes",offLabel:"Hide mistakes",onIcon:"mdi mdi-eye",offIcon:"mdi mdi-eye-off",onChange:function(){return s(Ie())}})}),Object(F.jsxs)("div",{className:"undoredo",children:[Object(F.jsx)(o.a,{className:dt()("button","p-button-large",gn.a.button),icon:"mdi mdi-undo",label:"Undo",onClick:function(){return s(He())},disabled:0===l.length}),Object(F.jsx)(o.a,{className:dt()("button","p-warning-button",gn.a.button),icon:"mdi mdi-redo",label:"Redo",onClick:function(){return s(Ge())},disabled:0===r.length})]}),Object(F.jsxs)("div",{className:"debug",children:[Object(F.jsxs)("div",{children:["Missing: ",i.missingCells]}),Object(F.jsxs)("div",{children:["Selected: ",t]})]})]})};function On(e,t,n){return{width:"".concat(e*n*10,"px"),height:"".concat(t*n*10,"px")}}function yn(e){return{width:"".concat(10*e,"px"),height:"".concat(10*e,"px")}}var Nn=n(250),Sn=n.n(Nn),kn=function(e){e.cell,e.index;var t=yn(Object(d.c)((function(e){return e.game})).zoomLevel);return Object(F.jsx)("div",{className:dt()("gamecell",Sn.a.blank),style:t})},Cn=n(99),_n=n.n(Cn),zn=function(e){var t=e.cell,n=(e.index,Object(d.c)((function(e){return e.game})).zoomLevel),a=yn(n),i=function(e){return{fontSize:"".concat(e/3.5,"rem")}}(n);return Object(F.jsxs)("div",{className:dt()("gamecell","hintCell"),style:a,children:[Object(F.jsx)("div",{className:"horizontalHint",style:i,children:t.hintHorizontal}),Object(F.jsx)("div",{className:"verticalHint",style:i,children:t.hintVertical})]})},wn=n(78),Mn=n.n(wn),In=function(e){var t,n,a=e.cell,i=e.index,l=Object(d.c)((function(e){return e.game})),r=l.selectedIndex,s=l.zoomLevel,c=l.markWrong,o=Object(d.b)(),u=function(e){return{fontSize:"".concat(e/1.4,"rem")}}(s),m=function(e){return{fontSize:"".concat(e/4,"rem"),lineHeight:"".concat(e/4,"rem")}}(s),b=yn(s),f=c&&a.solution>0&&a.guess!==a.solution;return Object(F.jsxs)("div",{className:dt()("gamecell",Mn.a.number,{selected:i===r}),style:b,onClick:function(e){o(ke(i))},children:[a.guess>0&&Object(F.jsx)("div",{className:dt()(Mn.a.guess,{wrongGuess:f}),style:u,children:a.guess}),!a.guess&&(null===(t=a.pencilMarks)||void 0===t?void 0:t.length)>0&&Object(F.jsx)("div",{className:dt()(Mn.a.pencilMarks),style:{},children:(n=a.pencilMarks,n.map((function(e){return Object(F.jsx)("div",{className:Mn.a["digit".concat(e)],style:m,children:e},e)})))})]})},Gn=function(){var e=Object(d.c)((function(e){return e.game})),t=e.game,n=e.zoomLevel,a=t.columnCount,i=t.rowCount;return Object(F.jsx)("div",{className:dt()(_n.a.gameBackground),children:Object(F.jsx)("div",{className:dt()(_n.a.gridContainer),style:On(a,i,n),children:Object(F.jsx)("div",{className:dt()(_n.a.grid),style:{gridTemplateColumns:"repeat(".concat(t.columnCount,", 1fr)"),gridTemplateRows:"repeat(".concat(t.rowCount,", 1fr)")},children:t.cells.map((function(e,t){return function(e,t){return e.type===me.BlankCell?Object(F.jsx)(kn,{cell:e,index:t},t):e.type===me.HintCell?Object(F.jsx)(zn,{cell:e,index:t},t):Object(F.jsx)(In,{cell:e,index:t},t)}(e,t)}))})})})},Hn=n(251),Pn=n.n(Hn),Bn=function(){var e=Object(d.c)((function(e){return e.game})).game,t=Object(d.b)();return Object(a.useEffect)((function(){if(!(e.state>=0)){console.log("Loading game state...");var n=localStorage.getItem("currentGame");if(n){var a=JSON.parse(n);t(Se(a))}else c.push("/")}}),[]),Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(on,{}),Object(F.jsxs)("div",{className:Pn.a.content,children:[Object(F.jsx)(mn,{}),Object(F.jsx)(Gn,{}),Object(F.jsx)(xn,{})]})]})},Fn=n(74),Jn=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.users})).user;return Object(a.useEffect)((function(){t&&c.push("/")}),[t]),Object(F.jsx)("div",{className:"flex align-items-center justify-content-center",style:{height:"60%"},children:Object(F.jsxs)("div",{className:"surface-card p-4 shadow-2 border-round w-full lg:w-6",children:[Object(F.jsxs)("div",{className:"text-center mb-5",children:[Object(F.jsx)("div",{className:"text-900 text-3xl font-medium mb-3",children:"Welcome Back to Mr K.'s Kakuro"}),Object(F.jsx)("span",{className:"text-600 font-medium line-height-3",children:"Don't have an account?"}),Object(F.jsx)(Fn.a,{className:"font-medium no-underline ml-2 text-blue-500 cursor-pointer",to:"/signup",children:"Create one today!"})]}),Object(F.jsx)(Ht.d,{initialValues:{email:"",password:""},onSubmit:function(t){e(function(e){return function(){var t=Object(f.a)(b.a.mark((function t(n){var a,i,l,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(G()),t.prev=1,t.next=4,h.post("/users/login",e);case 4:l=t.sent,a=l.data.user,i=l.data.token,localStorage.setItem("user",JSON.stringify(a)),localStorage.setItem("token",i),t.next=16;break;case 11:return t.prev=11,t.t0=t.catch(1),r=t.t0.response,n(M({resourceType:"users",resources:[],response:r})),t.abrupt("return");case 16:n(_(a));case 17:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()}(t))},children:function(e){e.setFieldValue,e.values;return Object(F.jsxs)(Ht.c,{className:"p-fluid",children:[Object(F.jsx)(Pt,{name:"email",label:"Email",as:Lt.a,className:"block text-900 font-medium mb-2"}),Object(F.jsx)(Pt,{name:"password",label:"Password",type:"password",as:Lt.a,className:"block text-900 font-medium mb-2"}),Object(F.jsx)(o.a,{type:"submit",label:"Sign In!",icon:"mdi mdi-login-variant",className:"w-full"})]})}})]})})},Dn=Vt.b().shape({name:Vt.c().min(3).max(50,"Must be 50 characters or less").required("Required"),email:Vt.c().max(50,"Must be 50 characters or less").required("Required"),password:Vt.c().min(10,"Must be at least 10 characters").max(25,"Must be 25 characters or less").required("Required")}),An=function(){var e=Object(d.b)();return Object(F.jsx)("div",{className:"flex align-items-center justify-content-center",style:{height:"60%"},children:Object(F.jsxs)("div",{className:"surface-card p-4 shadow-2 border-round w-full lg:w-6",children:[Object(F.jsxs)("div",{className:"text-center mb-5",children:[Object(F.jsx)("div",{className:"text-900 text-3xl font-medium mb-3",children:"Sign Up For Mr K.'s Kakuro"}),Object(F.jsx)("span",{className:"text-600 font-medium line-height-3",children:"Already have an account?"}),Object(F.jsx)(Fn.a,{className:"font-medium no-underline ml-2 text-blue-500 cursor-pointer",to:"/signin",children:"Sign In!"})]}),Object(F.jsx)(Ht.d,{enableReinitialize:!0,initialValues:{name:"",email:"",password:""},onSubmit:function(t){e(function(e){return function(){var t=Object(f.a)(b.a.mark((function t(n){var a,i,l,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(G()),t.prev=1,t.next=4,h.post("/users",e);case 4:l=t.sent,a=l.data.user,i=l.data.token,localStorage.setItem("user",JSON.stringify(a)),localStorage.setItem("token",i),t.next=17;break;case 11:return t.prev=11,t.t0=t.catch(1),r=t.t0.response,console.log("response:",r),n(I("Unable to sign up")),t.abrupt("return");case 17:n(_(a));case 18:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()}(t)),c.push("/")},validationSchema:Dn,children:function(e){e.setFieldValue,e.values;return Object(F.jsxs)(Ht.c,{className:"p-fluid",children:[Object(F.jsx)(Pt,{name:"name",label:"Gamer Name",as:Lt.a,className:"block text-900 font-medium mb-2"}),Object(F.jsx)(Pt,{name:"email",label:"Email",as:Lt.a,className:"block text-900 font-medium mb-2"}),Object(F.jsx)(Pt,{name:"password",label:"Password",type:"password",as:Lt.a,className:"block text-900 font-medium mb-2"}),Object(F.jsx)(o.a,{type:"submit",label:"Sign Up!",icon:"mdi mdi-account-plus",className:"w-full"})]})}})]})})},Ln=n(13),En=(n(507),n(35)),Rn=Object(En.b)({alerts:q,design:st,list:ne,game:Pe,users:H}),Vn=Object(j.a)({devTools:!1,reducer:Rn}),Tn=function(){return Object(F.jsxs)(d.a,{store:Vn,children:[Object(F.jsx)(J,{}),Object(F.jsx)(U,{}),Object(F.jsx)(Ln.b,{history:c,children:Object(F.jsxs)(Ln.c,{children:[Object(F.jsx)(Ln.a,{path:"/create",children:Object(F.jsx)(Yt,{})}),Object(F.jsx)(Ln.a,{path:"/play",children:Object(F.jsx)(Bn,{})}),Object(F.jsx)(Ln.a,{path:"/signin",children:Object(F.jsx)(Jn,{})}),Object(F.jsx)(Ln.a,{path:"/signup",children:Object(F.jsx)(An,{})}),Object(F.jsx)(Ln.a,{path:"/",children:Object(F.jsx)(sn,{})})]})})]})},qn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,511)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,l=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),l(e),r(e)}))};r.a.render(Object(F.jsx)(i.a.StrictMode,{children:Object(F.jsx)(Tn,{})}),document.getElementById("root")),qn()},64:function(e,t,n){e.exports={dialog:"ImportDialog_dialog__5Rts6",dragging:"ImportDialog_dragging__2ddO9",button:"ImportDialog_button__mXT6g",textarea:"ImportDialog_textarea__2QBOO"}},65:function(e,t,n){e.exports={guessButton:"GuessButton_guessButton__2HTay",pencilMark:"GuessButton_pencilMark__30ALz",digit:"GuessButton_digit__1y-ZY",digit1:"GuessButton_digit1__2OikV",digit2:"GuessButton_digit2__1EUR8",digit3:"GuessButton_digit3__tibxt",digit4:"GuessButton_digit4__2bG_l",digit5:"GuessButton_digit5__1DTxj",digit6:"GuessButton_digit6__29Opa",digit7:"GuessButton_digit7__3aZzj",digit8:"GuessButton_digit8__2lnCS",digit9:"GuessButton_digit9__35MKY"}},76:function(e,t,n){e.exports={designCell:"DesignCell_designCell__1mdb1",hintMissing:"DesignCell_hintMissing__GjhmS",solution:"DesignCell_solution__1hCNm",index:"DesignCell_index__1hyaN"}},77:function(e,t,n){e.exports={dialog:"HintDialog_dialog__3oXoT",label:"HintDialog_label__1UY5p",buttonGrid:"HintDialog_buttonGrid__3MkIY",button:"HintDialog_button__2lNtm"}},78:function(e,t,n){e.exports={number:"NumberCell_number__1mt2Y",guess:"NumberCell_guess__1Iq08",pencilMarks:"NumberCell_pencilMarks__2eIXW",digit1:"NumberCell_digit1__1IfxI",digit2:"NumberCell_digit2__1g9yB",digit3:"NumberCell_digit3__20FAY",digit4:"NumberCell_digit4__1lxHB",digit5:"NumberCell_digit5__324jS",digit6:"NumberCell_digit6__1elhh",digit7:"NumberCell_digit7__1G9wx",digit8:"NumberCell_digit8__21LqC",digit9:"NumberCell_digit9__3ltYs"}},99:function(e,t,n){e.exports={gameBackground:"GameGrid_gameBackground__2gUQF",gridContainer:"GameGrid_gridContainer__1jqzn",grid:"GameGrid_grid__3SI7n"}}},[[508,1,2]]]);
//# sourceMappingURL=main.4b4012fe.chunk.js.map