(this.webpackJsonpkakuro=this.webpackJsonpkakuro||[]).push([[0],{102:function(e,t,n){e.exports={gameBackground:"GameGrid_gameBackground__2gUQF",gridContainer:"GameGrid_gridContainer__1jqzn",grid:"GameGrid_grid__3SI7n"}},129:function(e,t,n){},138:function(e,t,n){e.exports={header:"MyMenubar_header__1SUGp",startItem:"MyMenubar_startItem__5gsTl"}},140:function(e,t,n){e.exports={createGame:"CreateGame_createGame__t-nS6",createSteps:"CreateGame_createSteps__3TBZt","p-steps":"CreateGame_p-steps__1OyM9","p-steps-item":"CreateGame_p-steps-item__2Lv77","p-menuitem-link":"CreateGame_p-menuitem-link__3yOB-","p-steps-title":"CreateGame_p-steps-title__6eRPZ"}},141:function(e,t,n){e.exports={gameBackground:"DrawGrid_gameBackground__2dTqA",grid:"DrawGrid_grid__XoYjv"}},143:function(e,t,n){e.exports={content:"MainMenu_content__1zXTd",bar:"MainMenu_bar__12htD"}},213:function(e,t,n){},252:function(e,t,n){e.exports={blank:"BlankCell_blank__h84dH"}},253:function(e,t,n){e.exports={content:"PlayGame_content__3keJX"}},27:function(e,t,n){e.exports={controls:"Controls_controls__fpjJI",columns:"Controls_columns__1dogA",button:"Controls_button__3i3Ud",zoomButtons:"Controls_zoomButtons__1tiul"}},272:function(e,t){},274:function(e,t){},289:function(e,t){},291:function(e,t){},319:function(e,t){},32:function(e,t,n){e.exports={button:"SaveGame_button__3Is-u"}},321:function(e,t){},322:function(e,t){},327:function(e,t){},329:function(e,t){},335:function(e,t){},337:function(e,t){},356:function(e,t){},368:function(e,t){},371:function(e,t){},38:function(e,t,n){e.exports={combinations:"CombinationLine_combinations__2uXXm",column:"CombinationLine_column__1JW6l",text:"CombinationLine_text__3BaJ1",sumSolved:"CombinationLine_sumSolved__3F-S9",possibility:"CombinationLine_possibility__ru2Ma",excluded:"CombinationLine_excluded__1pGKs",impossible:"CombinationLine_impossible__2l3BJ",usedDigit:"CombinationLine_usedDigit__1Yysu",candidateDigit:"CombinationLine_candidateDigit__1X8Zc",impossibleDigit:"CombinationLine_impossibleDigit__sdzMi"}},508:function(e,t,n){},509:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),s=n(17),c=n.n(s),l=n(20),r=Object(l.b)(),o=n(5),u=n(235),d=n(3),m=n(10),b=n.n(m),f=n(22),j=n(30),g=Object(j.b)({name:"alerts",initialState:{alerts:{},pageTitle:null,isFetching:!1,notFound:null},reducers:{clearAlert:function(e,t){delete e.alerts[t.payload]},setAlert:function(e,t){var n=t.payload;e.alerts[n.severity]=n,e.isFetching=!1},setNotFound:function(e,t){e.notFound=t.payload},setErrorAlert:function(e,t){var n={severity:"error",summary:t.payload};e.alerts[n.severity]=n,e.isFetching=!1},setSuccessAlert:function(e,t){var n={severity:"success",summary:t.payload};e.alerts[n.severity]=n,e.isFetching=!1},setWarningAlert:function(e,t){var n={severity:"warn",summary:t.payload};e.alerts[n.severity]=n,e.isFetching=!1},setIsFetching:function(e,t){e.isFetching=t.payload},setPageTitle:function(e,t){e.pageTitle=t.payload,document.title=t.payload}}}),p=g.actions,v=p.clearAlert,h=(p.setAlert,p.setErrorAlert),x=(p.setIsFetching,p.setNotFound,p.setPageTitle,p.setSuccessAlert),O=p.setWarningAlert,S=g.reducer,y=n(237),N=n(238),k=n.n(N).a.create({baseURL:"https://kakuro-api.kuehnert.it/"});var C,_=function(){var e=localStorage.getItem("token");return e?{Authorization:"Bearer ".concat(e)}:{Authorization:null}};console.log("userSlice: loading user from storage...");try{var z=localStorage.getItem("user");C=null!=z?JSON.parse(z):null;var w=localStorage.getItem("token");if(w){var M=Object(y.decode)(w);Date.now()>=1e3*M.exp&&(console.log("token expired"),localStorage.removeItem("user"),localStorage.removeItem("token"),C=null)}}catch(ei){localStorage.removeItem("user"),localStorage.removeItem("token"),C=null}var I,G,D={isLoggedIn:null!=C,isRequesting:!1,user:C,error:null,debugMode:!1},P=Object(j.b)({name:"user",initialState:D,reducers:{loginSuccess:function(e,t){e.user=t.payload,e.isLoggedIn=null!=t.payload,e.error=null,e.isRequesting=!1},logoutFailed:function(e,t){e.error=t.payload,e.user=null,e.isLoggedIn=!1,e.isRequesting=!1},logoutSuccess:function(e){e.user=null,e.isLoggedIn=!1,e.error=null,e.isRequesting=!1},signUpSuccess:function(e,t){e.user=t.payload,e.isLoggedIn=null!=t.payload,e.error=null,e.isRequesting=!1},signUpFailed:function(e,t){e.error=t.payload,e.user=null,e.isLoggedIn=!1,e.isRequesting=!1},submitting:function(e){e.isRequesting=!0},requestFailed:function(e,t){console.log("action.payload:",t.payload);var n=t.payload.response.status;401!==n&&403!==n||(localStorage.removeItem("user"),localStorage.removeItem("token"),e.user=null,e.isLoggedIn=!1,e.error=null,e.isRequesting=!1)},toggleDebugMode:function(e){e.debugMode=!e.debugMode}}}),F=P.actions,J=F.loginSuccess,B=F.logoutFailed,E=F.logoutSuccess,L=F.requestFailed,H=F.signUpFailed,A=(F.signUpSuccess,F.submitting),R=F.toggleDebugMode,T=P.reducer,q=n(138),U=n.n(q),V=n(94),W=n(2),K=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.users})).user,n=Object(d.c)((function(e){return e.users})).debugMode,i=Object(W.jsx)("div",{className:U.a.startItem,children:Object(W.jsx)("h3",{children:"Mr K.'s Kakuro"})}),a=[{label:"Menu",icon:"mdi mdi-hamburger",command:function(){return r.push("/")}},{label:"Design Puzzle",icon:"mdi mdi-pencil",command:function(){return r.push("/create")},disabled:null==t},{label:"Play Puzzle",icon:"mdi mdi-play",command:function(){return r.push("/play")}}],s=Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(V.a,{checked:n,onLabel:"Debug",offLabel:"No Debug",onIcon:"mdi mdi-bug",offIcon:"mdi mdi-bug-check",onChange:function(){e(R())}}),t?Object(W.jsx)(o.a,{label:"Sign Out ".concat(t.name),icon:"mdi mdi-logout",onClick:function(){return e(function(){var e=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.post("/users/logout",null,{headers:_()});case 3:e.next=11;break;case 5:return e.prev=5,e.t0=e.catch(0),n=e.t0.response,t(h("There was a problem signing you out.")),t(B(JSON.stringify(n))),e.abrupt("return");case 11:return e.prev=11,localStorage.removeItem("user"),localStorage.removeItem("token"),e.finish(11);case 15:t(x("You have successfully signed out.")),t(E());case 17:case"end":return e.stop()}}),e,null,[[0,5,11,15]])})));return function(t){return e.apply(this,arguments)}}())}}):Object(W.jsx)(o.a,{label:"Sign Up/Sign In",icon:"mdi mdi-login",onClick:function(){return r.push("/signin")}})]});return Object(W.jsx)(u.a,{model:a,start:i,end:s,className:U.a.header})},Y=n(9),X=n(95),Z=n(11),Q=["isAuthenticated","authenticationPath"];function $(e){var t=e.isAuthenticated,n=e.authenticationPath,a=Object(X.a)(e,Q),s=Object(d.b)();return Object(i.useEffect)((function(){t||s(h("You must be signed in to do this."))}),[t]),t?Object(W.jsx)(Z.b,Object(Y.a)({},a)):Object(W.jsx)(Z.a,{to:{pathname:n}})}!function(e){e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical",e[e.Both=2]="Both"}(I||(I={})),function(e){e[e.SetSize=0]="SetSize",e[e.DrawGrid=1]="DrawGrid",e[e.InsertHints=2]="InsertHints",e[e.CheckPuzzle=3]="CheckPuzzle"}(G||(G={}));var ee,te,ne,ie=[{label:"Set Size"},{label:"Draw Grid"},{label:"Insert Hints"},{label:"Check Puzzle"}],ae=n(96),se=n(240),ce=Object(j.b)({name:"list",initialState:{list:[],solved:[]},reducers:{fetchListSuccess:function(e,t){e.list=t.payload},fetchSolvedSuccess:function(e,t){e.solved=t.payload},addPuzzleToList:function(e,t){e.list.push(t.payload)},setChoiceID:function(e,t){e.choice=t.payload}}}),le=ce.actions,re=le.addPuzzleToList,oe=le.fetchListSuccess,ue=le.fetchSolvedSuccess,de=le.setChoiceID,me=ce.reducer;function be(e){var t=e.cells,n=0,i=0;return t.filter((function(e){return e.type===te.HintCell})).every((function(e){var t,a,s,c,l,r,o,u,d=e;(null===(t=d.hints[0])||void 0===t?void 0:t.sumSolved)&&(n+=null===(o=d.hints[0])||void 0===o?void 0:o.sumSolved);(null===(a=d.hints[1])||void 0===a?void 0:a.sumSolved)&&(i+=null===(u=d.hints[1])||void 0===u?void 0:u.sumSolved);return(!(null===(s=d.hints[0])||void 0===s?void 0:s.sumSolved)||(null===(c=d.hints[0])||void 0===c?void 0:c.sumSolved)>-1)&&(!(null===(l=d.hints[1])||void 0===l?void 0:l.sumSolved)||(null===(r=d.hints[1])||void 0===r?void 0:r.sumSolved)>-1)}))?n!==i?{valid:!1,error:"Hints across: ".concat(n,", down: ").concat(i,". Must be equal.")}:{valid:!0}:{valid:!1,error:"Not all hints provided."}}function fe(e){return e.cells.filter((function(e){return e.type===te.NumberCell})).every((function(e){return e.solution>0}))}!function(e){e[e.Easy=0]="Easy",e[e.Medium=1]="Medium",e[e.MediumPlus=2]="MediumPlus",e[e.Hard=3]="Hard",e[e.VeryHard=4]="VeryHard"}(ee||(ee={})),function(e){e.BlankCell="blankCell",e.HintCell="hintCell",e.NumberCell="numberCell"}(te||(te={})),function(e){e[e.Raw=0]="Raw",e[e.Valid=1]="Valid",e[e.Solved=2]="Solved"}(ne||(ne={}));var je=n(14),ge=function(){for(var e={},t=new Array(10).fill(!1),n=function n(i,a){10===a?function(){for(var n=new Array,i=0,a=0,s=1;s<t.length;s++)t[s]&&(n.push(s),i+=1,a+=s);e[i]||(e[i]={}),e[i][a]||(e[i][a]=new Array),e[i][a].push(n)}():(t[a]=!0,n(i,a+1),t[a]=!1,n(i,a+1),a++)},i=1;i<9;i++)t[i]=!0,n(i,i+1),t[i]=!1;return delete e[1],e}();Object.freeze(ge);var pe=ge;function ve(e){var t=e.sumSolved,n=e.count,i=pe[n][t];return i?i.map((function(e){return{digits:e,excluded:!1,impossible:!1}})):[]}var he=n(19),xe=n(49),Oe=n.n(xe);function Se(e,t){var n=e.cells,i=e.hintMaps,a=new Array(2),s=[];[0,1].forEach((function(e){var c=i[e][t];a[e]=n[c].hints[e],s.push(Oe.a.uniq(a[e].combinations.filter((function(e){return!e.excluded&&!e.impossible})).map((function(e){return e.digits})).flat().sort()))}));var c=Oe.a.intersection(s[0],s[1]),l=Oe.a.union(a[0].usedDigits,a[1].usedDigits);return c=Oe.a.difference(c,l),{hints:a,candidates:c,allUsed:l}}function ye(e,t,n){var i=e.cells,a=Se(e,t),s=i[t];s.guess>0&&[0,1].forEach((function(e){return Oe.a.pull(a.hints[e].usedDigits,s.guess)})),s.guess=n,[0,1].forEach((function(e){var t=a.hints[e],i=t.usedDigits,s=t.combinations;n>0&&i.push(n),s.forEach((function(e){e.impossible=Oe.a.difference(i,e.digits).length>0}))})),[0,1].map((function(e){return a.hints[e].cellIndexes})).flat().filter((function(e){return e!==t})).forEach((function(e){var t=i[e];t.pencilMarks=t.pencilMarks.filter((function(e){return e!==n}))}))}function Ne(e,t,n){for(var i=e.cells,a=_e(e,n),s=t-a,c=[],l=[],r=0,o=0;i[s].type===te.NumberCell;)s-=a;for(var u=s;u+a<i.length&&i[u+a].type===te.NumberCell;){u+=a,c.push(u);var d=i[u];d.guess&&(l.push(d.guess),o+=d.guess),d.solution>0&&(r+=d.solution)}var m=(u-s)/a;return{index:s,count:m,sumSolved:r,sumGuessed:o,cellIndexes:c,usedDigits:l,combinations:o>0?ve({sumSolved:r,count:m}):[]}}function ke(e){var t=!1;return e.cells.forEach((function(n){if(n.type===te.NumberCell){var i,a=n;0===a.guess&&1===(null===(i=a.pencilMarks)||void 0===i?void 0:i.length)&&(a.solution>0?a.guess=a.pencilMarks[0]:a.solution=a.pencilMarks[0],ye(e,a.index,a.pencilMarks[0]),t=!0)}})),t}function Ce(e){e.cells.forEach((function(t,n){t.type===te.NumberCell&&function(e,t,n){if(!(e.guess>0)){var i=e.pencilMarks||[],a=n.cells[n.hintMaps[0][t]].hints[0],s=n.cells[n.hintMaps[1][t]].hints[1],c=[].concat(Object(he.a)(a.usedDigits),Object(he.a)(s.usedDigits)),l=a.combinations.filter((function(e){return!e.impossible})).map((function(e){return e.digits})),r=s.combinations.filter((function(e){return!e.impossible})).map((function(e){return e.digits})),o=Array.from(new Set(l.flat())),u=Array.from(new Set(r.flat()));if(i=o.filter((function(e){return u.includes(e)&&!c.includes(e)})).sort(),(e.pencilMarks||[]).length>0){if(i=i.filter((function(t){return e.pencilMarks.includes(t)})),2===a.count&&t+1<n.cells.length&&n.cells[t+1].type===te.NumberCell&&0===n.cells[t+1].guess){var d=n.cells[t+1];i=i.filter((function(e){return d.pencilMarks.includes(a.sumSolved-e)}))}if(2===s.count&&t+n.columnCount<n.cells.length&&n.cells[t+n.columnCount].type===te.NumberCell&&0===n.cells[t+n.columnCount].guess){var m=n.cells[t+n.columnCount];i=i.filter((function(e){return m.pencilMarks.includes(s.sumSolved-e)}))}}e.pencilMarks=i}}(t,n,e)}))}function _e(e,t){return 0===t?1:e.columnCount}var ze=function(e,t){var n=Object(je.a)(t,2),i=n[0],a=n[1],s=new Array(2);return i>0&&(s[0]={index:e,sumSolved:-1,sumGuessed:0,count:i,cellIndexes:[],usedDigits:[],combinations:[]}),a>0&&(s[1]={index:e,sumSolved:-1,sumGuessed:0,count:a,cellIndexes:[],usedDigits:[],combinations:[]}),s};function we(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.cells,i=e.hintMaps,a=0,s=function(t){var i=n[t],s=[0,0];if(i.type!==te.NumberCell)if([0,1].forEach((function(a){for(var c=t+_e(e,a);c<n.length&&n[c].type===te.NumberCell;)i.type=te.HintCell,s[a]++,c+=_e(e,a)})),"00"!==s.join("")){var c=i,l=!1;s[0]>0&&(l=!c.hints||!c.hints[0]||c.hints[0].count!==s[0]);var r=!1;s[1]>0&&(r=!c.hints||!c.hints[1]||c.hints[1].count!==s[1]),(l||r)&&(c.hints=ze(t,s)),a+=(s[0]>0?1:0)+(s[1]>0?1:0)}else i.type=te.BlankCell,delete i.hints},c=0;c<n.length-2;c++)s(c);n.filter((function(e){return e.type===te.HintCell})).forEach((function(n){var a=n;[0,1].forEach((function(s){if(a.hints[s]){var c,l=Ne(e,a.index+_e(e,s),s),r=t?l.sumSolved:(null===(c=a.hints[s])||void 0===c?void 0:c.sumSolved)||0,o=r>0?ve({sumSolved:r,count:l.count}):[],u=Object(Y.a)(Object(Y.a)({},l),{},{sumSolved:r,sumGuessed:0,usedDigits:[],combinations:o});a.hints[s]=u,l.cellIndexes.forEach((function(e){i[s][e]=n.index}))}}))})),n.filter((function(e){return e.type===te.NumberCell})).forEach((function(e){var t=e;t.guess=0,t.pencilMarks=[],t.solution=0})),e.hintCount=a}var Me=["cells","missingCells","hintMaps"];var Ie,Ge=function(e){var t=e.cells.map((function(e){return e.type!==te.NumberCell?0:e.solution})).join(""),n=(e.cells,e.missingCells,e.hintMaps,Object(X.a)(e,Me));return Object(Y.a)(Object(Y.a)({},n),{},{cellString:t})};function De(e,t){if(t>=e.cells.length){var n=JSON.parse(JSON.stringify(e));n.cells.forEach((function(e){if(e.type===te.NumberCell){var t=e;t.solution=t.guess,t.guess=0,t.pencilMarks=[]}})),Ie.push(n)}else{var i=e.cells[t];(i.type!==te.NumberCell||i.guess>0)&&De(e,t+1)}}var Pe=function(e){var t=JSON.parse(JSON.stringify(e));for(Ce(t);ke(t);)Ce(t);return Ie=new Array,De(t,0),0===Ie.length?{error:"Puzzle invalid; no solution."}:Ie.length>1?{error:"Puzzle invalid; more than one solution (".concat(Ie.length,").")}:{solution:Ie[0]}};var Fe=function(e){for(var t=e.cells,n=0,i=0;i<t.length;i++){var a=t[i];if(a.type===te.NumberCell){if(n+=1,1===Ne(e,a.index,0).count)return{valid:!1,message:"There is at least one group across with only one cell"};if(1===Ne(e,a.index,1).count)return{valid:!1,message:"There is at least one group down with only one cell"}}}return n<3?{valid:!1,message:"Too few number cells"}:{valid:!0,message:"Puzzle grid is fine"}},Je=function(e,t){return Array.from({length:e*t},(function(e,t){return{index:t,type:te.BlankCell}}))},Be={activeStep:0,puzzle:{name:"Unnamed",level:4,columnCount:10,rowCount:10,cells:Je(10,10),state:ne.Raw,hintCount:-1,missingCells:-1,hintMaps:[{},{}]}},Ee=Object(j.b)({name:"design",initialState:Be,reducers:{setActiveStep:function(e,t){e.activeStep=t.payload},setBaseGame:function(e,t){var n=e.puzzle.columnCount,i=e.puzzle.rowCount,a=Object(Y.a)(Object(Y.a)({},e.puzzle),t.payload);n===a.columnCount&&i===a.rowCount||(a.cells=Je(a.columnCount,a.rowCount)),e.puzzle=a},clearDesignGame:function(){return localStorage.removeItem("designPuzzle"),Be},setPuzzle:function(e,t){var n=t.payload;(e.puzzle=n,localStorage.setItem("designPuzzle",JSON.stringify(n)),Fe(n).valid)&&(e.activeStep=G.InsertHints,be(n).valid&&(e.activeStep=G.CheckPuzzle))},updateCell:function(e,t){var n=t.payload;n.type!==te.NumberCell||n.guess||(n.guess=0),e.puzzle.cells[n.index]=n,e.puzzle.state=ne.Raw,e.puzzle.hintCount=e.puzzle.cells.reduce((function(e,t){if(t.type!==te.HintCell)return e;var n,i,a=t;return e+(-1===(null===(n=a.hints[0])||void 0===n?void 0:n.sumSolved)?1:0)+(-1===(null===(i=a.hints[1])||void 0===i?void 0:i.sumSolved)?1:0)}),0)},makeHintCells:function(e){we(e.puzzle)},solveGameSuccess:function(e,t){e.puzzle=t.payload,e.puzzle.state=ne.Solved},solveGameFailed:function(e){e.puzzle.cells.filter((function(e){return e.type===te.NumberCell})).forEach((function(e){return e.solution=0})),e.puzzle.state=ne.Raw,e.activeStep=G.InsertHints},checkGameSuccess:function(e){e.puzzle.state=ne.Valid},createGameSuccess:function(){return localStorage.removeItem("designPuzzle"),Be}}}),Le=Ee.actions,He=(Le.checkGameSuccess,Le.clearDesignGame),Ae=Le.createGameSuccess,Re=Le.setActiveStep,Te=Le.setBaseGame,qe=Le.setPuzzle,Ue=Le.makeHintCells,Ve=Le.solveGameSuccess,We=Le.solveGameFailed,Ke=Le.updateCell,Ye=Ee.reducer,Xe=n(140),Ze=n.n(Xe),Qe=n(7),$e=n.n(Qe);var et=function(e){return e.filter((function(e){return e.type===te.NumberCell&&0===e.guess})).length},tt={zoomLevel:6,game:{state:-1,cells:[],columnCount:-1,rowCount:-1,name:"Dummy",level:-1,hintCount:-1,missingCells:-1,hintMaps:[{},{}]},markWrong:JSON.parse(localStorage.getItem("kakuro-markWrong")||"false"),undoStack:[],redoStack:[]},nt=Object(j.b)({name:"game",initialState:tt,reducers:{setGameState:function(e,t){e.game=t.payload,e.undoStack=[],e.redoStack=[]},setCurrentGameSuccess:function(e,t){e.undoStack=[],e.redoStack=[],e.game=t.payload,e.game.missingCells=et(e.game.cells),delete e.selectedIndex;var n=JSON.stringify(e.game);localStorage.setItem("currentGame",n)},setSelectedIndex:function(e,t){var n=t.payload;e.selectedIndex=n},increaseZoom:function(e,t){var n=t.payload;if(0===n)e.zoomLevel=tt.zoomLevel;else{var i=e.zoomLevel+n;i>=3&&i<=10&&(e.zoomLevel=i)}},setGuessSuccess:function(e,t){e.undoStack.push(JSON.stringify(e.game)),e.redoStack=[];var n=t.payload,i=n.newGame,a=n.newMissingCells;e.game=i,e.game.missingCells=a,localStorage.setItem("currentGame",JSON.stringify(e.game))},togglePencilMark:function(e,t){e.undoStack.push(JSON.stringify(e.game)),e.redoStack=[];var n=t.payload,i=n.index,a=n.guess,s=JSON.parse(JSON.stringify(e.game)),c=s.cells[i];if(c.type===te.NumberCell){var l=c.pencilMarks.indexOf(a);0===a?c.pencilMarks=[]:l<0?(c.pencilMarks.push(a),c.pencilMarks.sort()):c.pencilMarks.splice(l,1),e.game=s,localStorage.setItem("currentGame",JSON.stringify(e.game))}},resetGame:function(e){e.undoStack.push(JSON.stringify(e.game)),e.redoStack=[],e.selectedIndex=void 0,e.game=function(e){var t=JSON.parse(JSON.stringify(e));return t.cells.filter((function(e){return e.type===te.NumberCell})).forEach((function(e){e.guess=0,e.pencilMarks=[]})),t.cells.filter((function(e){return e.type===te.HintCell})).forEach((function(e){e.hints.forEach((function(e){e&&(e.sumGuessed=0,e.usedDigits=[],e.combinations.forEach((function(e){e.excluded=!1,e.impossible=!1})))}))})),t}(e.game),e.game.missingCells=et(e.game.cells)},toggleMarkWrong:function(e){e.markWrong=!e.markWrong,localStorage.setItem("kakuro-markWrong",JSON.stringify(e.markWrong))},clearPencilMarks:function(e){e.undoStack.push(JSON.stringify(e.game)),e.redoStack=[],e.game=function(e){var t=JSON.parse(JSON.stringify(e));return t.cells.filter((function(e){return e.type===te.NumberCell})).forEach((function(e){e.pencilMarks=[]})),t}(e.game)},autoPencil:function(e){e.undoStack.push(JSON.stringify(e.game)),ke(e.game),Ce(e.game),e.game.missingCells=et(e.game.cells)},toggleCombination:function(e,t){var n,i=t.payload,a=i.hintIndex,s=i.direction,c=i.combinationIndex,l=null===(n=e.game.cells[a].hints[s])||void 0===n?void 0:n.combinations[c];l&&(l.excluded=!(null===l||void 0===l?void 0:l.excluded))},undo:function(e){var t=e.undoStack.pop(),n=JSON.parse(t);e.redoStack.push(JSON.stringify(e.game)),e.game=n},redo:function(e){var t=e.redoStack.pop(),n=JSON.parse(t);e.undoStack.push(JSON.stringify(e.game)),e.game=n}}}),it=nt.actions,at=it.clearPencilMarks,st=it.increaseZoom,ct=it.setGameState,lt=it.setSelectedIndex,rt=it.setCurrentGameSuccess,ot=it.setGuessSuccess,ut=it.autoPencil,dt=it.resetGame,mt=it.toggleCombination,bt=it.togglePencilMark,ft=it.toggleMarkWrong,jt=it.redo,gt=it.undo,pt=nt.reducer,vt=function(e){return function(){var t=Object(f.a)(b.a.mark((function t(n){var i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:localStorage.removeItem("currentGame"),(i=JSON.parse(JSON.stringify(e))).cells.filter((function(e){return e.type===te.NumberCell})).forEach((function(e){var t=e;t.guess||(t.guess=0),t.pencilMarks||(t.pencilMarks=[])})),n(rt(i));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ht=function(e){var t=e.index,n=e.guess;return function(){var e=Object(f.a)(b.a.mark((function e(i,a){var s,c,l,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=a().game.game,c=JSON.parse(JSON.stringify(s)),l=c.cells[t],r=0===l.guess&&0!==n?s.missingCells-1:l.guess>0&&0===n?s.missingCells+1:s.missingCells,ye(c,t,n),0!==r){e.next=20;break}if(!c.cells.filter((function(e){return e.type===te.NumberCell})).every((function(e){return e.guess===e.solution}))){e.next=19;break}if(i(x("Puzzle solved. Congratulations!")),!s._id||!a().users.user){e.next=17;break}return e.prev=9,e.next=12,k.post("/users/solved",{id:s._id},{headers:_()});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),console.error(e.t0);case 17:e.next=20;break;case 19:i(O("There are still mistakes in the puzzle"));case 20:i(ot({newGame:c,newMissingCells:r}));case 21:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t,n){return e.apply(this,arguments)}}()},xt=n(241),Ot=n.n(xt),St=n(46),yt=n(97),Nt=n(32),kt=n.n(Nt),Ct=function(){var e=Object(i.useState)(!1),t=Object(je.a)(e,2),n=t[0],a=t[1],s=Object(i.useState)(""),c=Object(je.a)(s,2),l=c[0],r=c[1],u=Object(d.c)((function(e){return e.design})).puzzle;Object(i.useEffect)((function(){n&&r(JSON.stringify(u,null,4))}),[n,u]);return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(o.a,{label:"Export Puzzle",icon:"mdi mdi-export",onClick:function(){return a(!0)},className:kt.a.button}),Object(W.jsxs)(St.a,{header:"Spiel exportieren",visible:n,style:{width:"50vw",height:"70vh"},modal:!0,onHide:function(){return a(!1)},children:[Object(W.jsx)(yt.a,{rows:8,style:{width:"100%",height:"calc(100% - 48px)",fontFamily:"monospace"},value:l}),Object(W.jsx)(o.a,{icon:"mdi mdi-download",label:"Download",className:kt.a.button,onClick:function(){var e=new Blob([l]),t="kakuro-".concat(u.columnCount,"x").concat(u.rowCount,".json");Ot()(e,t)}}),Object(W.jsx)(o.a,{icon:"mdi mdi-close",label:"Close",className:kt.a.button,onClick:function(){return a(!1)}})]})]})},_t=function(e){var t=e.handleBack,n=e.handleNext,i=e.children,a=Object(d.c)((function(e){return e.design})).activeStep;return Object(W.jsx)(ae.a,{headerTemplate:function(e){var i="".concat(e.className," p-jc-start"),s="".concat(e.titleClassName," p-pl-1");return Object(W.jsxs)("div",{className:i,children:[Object(W.jsxs)("span",{className:s,children:["Step ",a+1,": ",ie[a].label]}),Object(W.jsxs)("span",{className:s,children:[Object(W.jsx)(Ct,{}),Object(W.jsx)(o.a,{label:"Back",icon:"mdi mdi-arrow-left",onClick:t,disabled:null==t,type:"button"}),Object(W.jsx)(o.a,{label:"Next",icon:"mdi mdi-arrow-right",onClick:n,disabled:null==n,type:"button"})]})]})},children:i})},zt=(n(129),n(213),n(65)),wt=n.n(zt),Mt=n(78),It=n.n(Mt),Gt=function(e){var t=e.cell,n=e.across,a=e.down,s=e.visible,c=e.onHide,l=Object(d.c)((function(e){return e.design})).puzzle,r=Object(i.useState)([]),u=Object(je.a)(r,2),m=u[0],b=u[1],f=Object(d.b)(),j=function(e){var n=Ne(l,t.index+(e?1:l.columnCount),e?0:1),i=Object.keys(pe[n.count]).map((function(e){return+e})),s=Math.min.apply(Math,Object(he.a)(i)),r=Math.max.apply(Math,Object(he.a)(i));return Object(W.jsxs)("div",{className:"",children:[Object(W.jsx)("div",{className:It.a.label,children:e?"Across":"Down"}),Object(W.jsx)("div",{className:It.a.buttonGrid,children:m.map((function(n){return Object(W.jsx)(o.a,{label:n<s||n>r?"":""+n,onClick:function(){return function(e,n){var i=JSON.parse(JSON.stringify(t));n?i.hints[0].sumSolved=e:i.hints[1].sumSolved=e,f(Ke(i)),n&&a||c()}(n,e)},disabled:n<s||n>r,className:$e()("p-button-rounded",It.a.button,e?"p-button-success":"p-button-info")},n)}))})]})};return Object(i.useEffect)((function(){var e=Array.from({length:46},(function(e,t){return t}));b(e)}),[]),Object(W.jsxs)(St.a,{className:It.a.dialog,header:"Set number(s) for hint cell",visible:s,modal:!0,onHide:c,children:[n&&j(!0),a&&j(!1)]})},Dt=function(e){var t,n,a,s=e.cell,c=(e.index,Object(d.c)((function(e){return e.design})).activeStep),l=Object(d.b)(),r=Object(i.useState)(!1),o=Object(je.a)(r,2),u=o[0],m=o[1],b=Object(d.c)((function(e){return e.users})).debugMode,f=function(e){if(null!=e){var t=e>0?e:"?",n=e>0?"":wt.a.hintMissing;return Object(W.jsx)("div",{className:n,children:t})}return null},j=s.type===te.NumberCell?s:null,g=j&&j.solution>0,p=j&&!g?null===(t=s.pencilMarks)||void 0===t?void 0:t.join(""):null,v=s.type===te.HintCell?s:null;return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)("div",{className:$e()(wt.a.designCell,s.type),onClick:function(e){if(c===G.DrawGrid){var t=Object(Y.a)(Object(Y.a)({},s),{},{type:s.type===te.NumberCell?te.BlankCell:te.NumberCell});l(Ke(t))}else 2===c&&s.type===te.HintCell&&m(!0)},children:[v&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("div",{className:"horizontalHint",children:f(null===(n=v.hints[0])||void 0===n?void 0:n.sumSolved)}),Object(W.jsx)("div",{className:"verticalHint",children:f(null===(a=v.hints[1])||void 0===a?void 0:a.sumSolved)})]}),g&&Object(W.jsx)("div",{className:wt.a.solution,children:j.solution}),p&&Object(W.jsx)("div",{className:wt.a.pencilmarks,children:p}),b&&Object(W.jsx)("div",{className:wt.a.debug,children:s.index})]}),c===G.InsertHints&&v&&Object(W.jsx)(Gt,{cell:v,visible:u,onHide:function(){m(!1)},across:null!=v.hints[0],down:null!=v.hints[1]})]})},Pt=n(141),Ft=n.n(Pt),Jt=function(){var e=Object(d.c)((function(e){return e.design})).puzzle,t=e.columnCount,n=e.cells,i=Object(d.c)((function(e){return e.users})).debugMode;return Object(W.jsxs)("div",{children:[Object(W.jsx)("div",{className:Ft.a.gameBackground,children:Object(W.jsx)("div",{className:Ft.a.grid,style:{gridTemplateColumns:"repeat(".concat(t,", 1fr)")},children:n.map((function(e,t){return Object(W.jsx)(Dt,{index:t,cell:e},t)}))})}),i&&Object(W.jsx)("div",{className:"debugWindow",children:Object(W.jsx)("pre",{children:JSON.stringify(e,null,4)})})]})},Bt=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.design})),n=t.activeStep,i=t.puzzle;return Object(W.jsxs)(_t,{handleBack:function(){e(Re(n-1))},children:[Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(o.a,{label:"Solve Step",icon:"mdi mdi-brain",onClick:function(){console.log("handleSolveStep");var t=JSON.parse(JSON.stringify(i));Ce(t),ke(t),fe(t)&&(t.state=ne.Solved),e(qe(t))},className:kt.a.button}),Object(W.jsx)(o.a,{label:"Solve Multiple",icon:"mdi mdi-brain",onClick:function(){var t=JSON.parse(JSON.stringify(i));for(Ce(t);ke(t);)Ce(t);fe(t)&&(t.state=ne.Solved),e(qe(t))},className:kt.a.button}),Object(W.jsx)(o.a,{label:"Solve Puzzle",icon:"mdi mdi-brain",onClick:function(){e(function(){var e=Object(f.a)(b.a.mark((function e(t,n){var i,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=n().design.puzzle,(a=Pe(i)).error?(t(h("Puzzle invalid: ".concat(a.error))),t(We())):(t(x("Puzzle solved.")),t(Ve(a.solution)));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},className:kt.a.button}),Object(W.jsx)(o.a,{label:"Send to Server & Play",icon:"mdi mdi-send",onClick:function(){var t;e((t=i,function(){var e=Object(f.a)(b.a.mark((function e(n){var i,a,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ge(t),e.prev=1,e.next=4,k.post("/puzzles",i,{headers:_()});case 4:s=e.sent,a=s.data,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(1),console.log("error:",JSON.stringify(e.t0,null,4)),n(h("Error: Puzzle is already in database")),e.abrupt("return");case 13:n(re(a)),n(Ae()),n(x("Puzzle erzeugt."));case 16:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()))},className:kt.a.button,disabled:i.state!==ne.Solved}),Object(W.jsx)(o.a,{label:"Play Locally",icon:"mdi mdi-play",onClick:function(){e(vt(i)),r.push("/play")},className:kt.a.button}),Object(W.jsx)(o.a,{label:"Start Over",icon:"mdi mdi-restart",onClick:function(){e(He())},className:$e()(kt.a.button,"p-button-warning","p-button-success")})]}),Object(W.jsx)(Jt,{})]})},Et=function(){var e=Object(d.c)((function(e){return e.design})),t=e.activeStep,n=e.puzzle,i=Object(d.b)();return Object(W.jsx)(_t,{handleBack:function(){i(Re(t-1))},handleNext:function(){var e=Fe(n);e.valid?(i(Ue()),i(Re(t+1))):i(h(e.message))},children:Object(W.jsx)(Jt,{})})},Lt=function(){var e=Object(d.c)((function(e){return e.design})),t=e.activeStep,n=e.puzzle,i=Object(d.b)();return Object(W.jsxs)(_t,{handleNext:function(){var e=be(n);e.valid?(i(Ue()),i(Re(t+1))):i(h(e.error||"Error in puzzle"))},handleBack:function(){i(Re(t-1))},children:[Object(W.jsx)(Jt,{}),Object(W.jsxs)("div",{className:"notes",children:["Missing hints: ",n.hintCount]})]})},Ht=n(31),At=function(e){var t=e.label,n=e.name,i=e.hint;return Object(W.jsxs)("div",{className:"field grid",children:[Object(W.jsx)("label",{htmlFor:n,className:"col-12 mb-2 md:col-2 md:mb-0",children:t}),Object(W.jsxs)("div",{className:"col-12 md:col-10",children:[Object(W.jsx)(Ht.b,Object(Y.a)(Object(Y.a)({},e),{},{className:"inputfield w-full"})),i&&Object(W.jsx)("div",{dangerouslySetInnerHTML:{__html:i}}),Object(W.jsx)(Ht.a,{name:n,component:"div",className:"fieldErrorMessage"})]})]})},Rt=n(244),Tt=function(e){var t=e.values,n=e.field,i=e.label,a=e.options,s=e.setFieldValue;return Object(W.jsxs)("div",{className:"field grid",children:[Object(W.jsx)("label",{htmlFor:n,className:"col-12 mb-2 md:col-2 md:mb-0",children:i}),Object(W.jsx)("div",{className:"col-12 md:col-10",children:Object(W.jsx)(Rt.a,{id:n,value:t[n],options:a,onChange:function(e){return function(e){s(n,e.value)}(e)},className:"justify-content-start"})})]})},qt=n(245),Ut=n(246),Vt=function(e){var t=e.values,n=e.field,i=e.label,a=e.setFieldValue,s=e.min,c=e.max,l=function(e){a(n,e.value)};return Object(W.jsxs)("div",{className:"field grid",children:[Object(W.jsx)("label",{htmlFor:n,className:"col-12 mb-2 md:col-2 md:mb-0",children:i}),Object(W.jsxs)("div",{className:"col-12 md:col-10",children:[Object(W.jsx)(qt.a,{value:t[n],onChange:function(e){return l(e)},className:"inputfield w-full"}),Object(W.jsx)(Ut.a,{id:n,value:t[n],onChange:function(e){return l(e)},min:s,max:c,className:"inputfield w-full"})]})]})},Wt=n(25),Kt={0:"Easy",1:"Medium",2:"Medium Plus",3:"Hard",4:"Very Hard"},Yt=[{label:"Easy",value:0},{label:"Medium",value:1},{label:"Medium Plus",value:2},{label:"Hard",value:3},{label:"Very Hard",value:4}],Xt=n(33),Zt=n(254),Qt=n(66),$t=n.n(Qt),en=function(){var e=Object(i.useState)(!1),t=Object(je.a)(e,2),n=t[0],a=t[1],s=Object(i.useState)(""),c=Object(je.a)(s,2),l=c[0],r=c[1],u=Object(d.b)(),m=Object(i.useCallback)((function(e){e.forEach((function(e){var t=new FileReader;t.onabort=function(){return console.log("file reading was aborted")},t.onerror=function(){return console.log("file reading has failed")},t.onload=function(){t.result&&r(t.result)},t.readAsText(e)}))}),[]),b=Object(Zt.a)({onDrop:m}),f=b.getRootProps,j=b.getInputProps,g=b.isDragActive;return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(o.a,{label:"Import Puzzle",icon:"mdi mdi-import",onClick:function(){return a(!0)},className:$t.a.button}),Object(W.jsxs)(St.a,{header:"Spiel importieren",visible:n,className:$t.a.dialog,modal:!0,onHide:function(){return a(!1)},children:[Object(W.jsxs)("div",Object(Y.a)(Object(Y.a)({},f()),{},{children:[Object(W.jsx)("input",Object(Y.a)({},j())),g?Object(W.jsx)("p",{children:"Drop the files here ..."}):Object(W.jsx)(W.Fragment,{children:Object(W.jsx)("p",{children:"Drag 'n' drop some files here, or click to select files"})}),Object(W.jsx)(yt.a,{className:$e()($t.a.textarea,g&&$t.a.dragging),value:l,onChange:function(e){return r(e.target.value)}})]})),Object(W.jsx)(o.a,{label:"Import",onClick:function(e){var t=JSON.parse(l);a(!1),u(qe(t))},disabled:""===l,className:$t.a.button})]})]})},tn=Xt.b().shape({name:Xt.c().max(50,"Must be 50 characters or less").required("Required"),level:Xt.a().min(0).max(4).required(),columnCount:Xt.a().min(4,"Must be between ".concat(4," and 30")).max(30).required("Required"),rowCount:Xt.a().min(4,"Must be between ".concat(4," and 30")).max(30).required("Required")}),nn=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.design})),n=t.activeStep,a=t.puzzle,s=Object(i.useRef)(null),c=function(){s.current&&s.current.handleSubmit(),e(Re(n+1))};return Object(W.jsx)(Ht.d,{enableReinitialize:!0,initialValues:a,onSubmit:function(t){e(Te(t))},validationSchema:tn,innerRef:s,children:function(e){var t=e.setFieldValue,n=e.values;return Object(W.jsxs)(_t,{handleNext:c,children:[Object(W.jsx)("h1",{children:"Import Puzzle"}),Object(W.jsx)(en,{}),Object(W.jsx)("h1",{children:"\u2026Or Create Puzzle"}),Object(W.jsxs)(Ht.c,{children:[Object(W.jsx)(At,{name:"name",label:"Puzzle Name",as:Wt.a}),Object(W.jsx)(Tt,{field:"level",label:"Difficulty",setFieldValue:t,options:Yt,values:n}),Object(W.jsx)(Vt,{field:"columnCount",label:"Columns Across",setFieldValue:t,min:4,max:40,values:n}),Object(W.jsx)(Vt,{field:"rowCount",label:"Rows Down",setFieldValue:t,min:4,max:40,values:n})]})]})}})},an=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.design})).activeStep;return Object(i.useEffect)((function(){var t=localStorage.getItem("designPuzzle");if(t){console.log("Found puzzle in local storage");var n=JSON.parse(t);e(qe(n))}}),[e]),Object(W.jsxs)("div",{className:Ze.a.createGame,children:[Object(W.jsx)(ae.a,{header:"Create a new Kakuro puzzle",children:Object(W.jsx)("div",{className:Ze.a.createSteps,children:Object(W.jsx)(se.a,{model:ie,activeIndex:t})})}),0===t&&Object(W.jsx)(nn,{}),1===t&&Object(W.jsx)(Et,{}),2===t&&Object(W.jsx)(Lt,{}),3===t&&Object(W.jsx)(Bt,{})]})},sn=n(511),cn=n(50),ln=n(256),rn=function(){var e=Object(d.c)((function(e){return e.users})).user,t=Object(d.c)((function(e){return e.list})),n=t.list,a=t.choice,s=t.solved,c=Object(d.b)(),l=n&&e?n.filter((function(e){return!s.includes(e._id)})):n;Object(i.useEffect)((function(){c(function(){var e=Object(f.a)(b.a.mark((function e(t){var n,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.get("/puzzles");case 3:i=e.sent,n=i.data,e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("error:",e.t0),t(h("Puzzles konnten nicht geladen werden."));case 11:t(oe(n));case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),e&&c(function(){var e=Object(f.a)(b.a.mark((function e(t){var n,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.get("/users/solved",{headers:_()});case 3:i=e.sent,n=i.data,e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("error:",e.t0),t(h("Liste gel\xf6ster Puzzles konnten nicht geladen werden."));case 11:t(ue(n));case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())}),[c,e]);return Object(W.jsxs)(ln.a,{value:l,autoLayout:!0,stripedRows:!0,className:"p-datatable-sm",scrollable:!0,scrollHeight:"60vh",selectionMode:"single",selection:a,onSelectionChange:function(e){return c(de(e.value))},dataKey:"_id",style:{width:"80vw"},stateStorage:"local",stateKey:"kakuro-puzzle-list",children:[Object(W.jsx)(cn.a,{field:"name",header:"Puzzle name",sortable:!0}),Object(W.jsx)(cn.a,{field:"level",header:"Difficulty",body:function(e){return Kt[e.level]},filter:!0,sortable:!0}),Object(W.jsx)(cn.a,{field:"columnCount",header:"Columns",sortable:!0}),Object(W.jsx)(cn.a,{field:"rowCount",header:"Rows",sortable:!0}),Object(W.jsx)(cn.a,{field:"creatorName",header:"Creator",filter:!0,sortable:!0}),Object(W.jsx)(cn.a,{field:"createdAt",header:"Date",body:function(e){return t=new Date(e.createdAt),Object(sn.a)(t,"dd-MM-yyyy");var t},sortable:!0}),e&&s&&Object(W.jsx)(cn.a,{field:"solved",header:"Solved",body:function(e){return e._id?s.includes(e._id)?Object(W.jsx)("i",{className:"mdi mdi-check"}):"":"Unknown"}})]})},on=n(101);var un=function(e){var t=e.cellString.split("").map((function(e,t){return+e>=1&&+e<=9?{index:t,type:te.NumberCell,guess:0,solution:+e,pencilMarks:[]}:{index:t,type:te.BlankCell}})),n=Object(Y.a)(Object(Y.a)({},e),{},{cells:t,state:ne.Solved,hintCount:-1,missingCells:et(t),hintMaps:[{},{}]});return we(n,!0),n},dn=n(143),mn=n.n(dn),bn=[{label:" 8x8",value:"8x8"},{label:"10x10",value:"10x10"},{label:"13x10",value:"10x13"},{label:"13x13",value:"13x13"},{label:"15x15",value:"15x15"},{label:"20x20",value:"20x20"},{label:"25x25",value:"25x25"},{label:"30x15",value:"15x30"},{label:"30x30",value:"30x30"}],fn=function(){var e=Object(d.c)((function(e){return e.list})).choice,t=Object(i.useState)("20x20"),n=Object(je.a)(t,2),a=n[0],s=n[1],c=Object(d.b)();return Object(W.jsx)("div",{className:mn.a.content,children:Object(W.jsxs)("div",{className:"text-center",children:[Object(W.jsxs)("div",{className:"mb-3 font-bold text-2xl",children:[Object(W.jsx)("span",{className:"text-900",children:"The best "}),Object(W.jsx)("span",{className:"text-blue-600",children:"Kakuro Game "}),Object(W.jsx)("span",{className:"text-900",children:"money can buy"})]}),Object(W.jsx)("div",{className:"text-700 text-sm mb-6",children:"All of this is work in progress, so be patient and stay tuned."}),Object(W.jsxs)("div",{className:$e()("flex flex-row justify-content-center p-3",mn.a.bar),children:[Object(W.jsx)(on.a,{value:a,options:bn,onChange:function(e){return s(e.value)},placeholder:"Select a Grid Size"}),Object(W.jsx)(o.a,{label:"Fetch game",icon:"mdi mdi-download-network",className:"p-button-lg",onClick:function(){var e;c((e=a,function(){var t=Object(f.a)(b.a.mark((function t(n){var i,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.post("/puzzles/steal",{size:e},{headers:_()});case 3:a=t.sent,i=a.data,t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("error:",t.t0),n(h("Fehler beim Importieren eines Puzzles."));case 11:n(re(i));case 12:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()))}}),Object(W.jsx)(o.a,{label:"Create game",icon:"mdi mdi-pencil",className:"p-button-lg",onClick:function(e){return r.push("/create")}}),Object(W.jsx)(o.a,{label:"Start New Game!",icon:"mdi mdi-controller-classic",className:"p-button-lg",onClick:function(){var t=un(e);c(vt(t)),r.push("/play")},disabled:!e})]}),Object(W.jsx)("div",{className:"",children:Object(W.jsx)(rn,{})})]})})};var jn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,a=Object(i.useRef)();Object(i.useEffect)((function(){a.current=t}),[t]),Object(i.useEffect)((function(){if(n&&n.addEventListener){var t=function(e){return a.current(e)};return n.addEventListener(e,t),function(){n.removeEventListener(e,t)}}}),[e,n])},gn=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.game})),n=t.game,a=t.selectedIndex,s=n.cells,c=function(t){t>n.columnCount&&t<s.length&&s[t].type===te.NumberCell&&e(lt(t))},l=Object(i.useCallback)((function(t){var i=t.key;a&&("ArrowUp"===i&&n?c(a-n.columnCount):"ArrowDown"===i&&n?c(a+n.columnCount):"ArrowLeft"===i&&n?c(a-1):"ArrowRight"===i&&n?c(a+1):i>="0"&&i<="9"?e(ht({index:a,guess:+i})):"Delete"===i&&e(ht({index:a,guess:0})))}),[a]);return jn("keydown",l),Object(W.jsx)(W.Fragment,{})},pn=n(38),vn=n.n(pn),hn=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.game})),n=t.selectedIndex,a=t.game,s=Object(d.c)((function(e){return e.users})).debugMode,c=Object(i.useState)(),l=Object(je.a)(c,2),r=l[0],o=l[1],u=[Object(W.jsx)("i",{className:"mdi mdi-arrow-right"}),Object(W.jsx)("i",{className:"mdi mdi-arrow-down"})],m=function(t,n,i){var a,s=t.combinations[n],c=s.excluded&&vn.a.excluded,l=s.impossible&&vn.a.impossible;return Object(W.jsx)("div",{className:$e()(vn.a.possibility,c,l),onClick:function(){return function(t,n,i){e(mt({hintIndex:t,direction:n,combinationIndex:i}))}(t.index,i,n)},children:null===(a=s.digits)||void 0===a?void 0:a.map((function(e){return function(e,t,n){return t.excluded||t.impossible?Object(W.jsx)("span",{children:n}):(null===r||void 0===r?void 0:r.allUsed.includes(n))?Object(W.jsx)("span",{className:vn.a.usedDigit,children:n},n):r.candidates.includes(n)?Object(W.jsx)("span",{className:vn.a.candidateDigit,children:n},n):Object(W.jsx)("span",{children:n},n)}(0,s,e)}))},n)},b=function(e,t){return e.combinations.map((function(n,i){return m(e,i,t)}))},f=function(e){var t=r.hints[e];return t.sumSolved<=0?"\xa0":Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)("div",{className:vn.a.sumSolved,children:[t.sumSolved,u[e]]}),Object(W.jsx)("div",{children:b(t,e)})]})};return Object(i.useEffect)((function(){if(n&&a.cells[n].type===te.NumberCell){var e=Se(a,n);o(e)}}),[a,n]),Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("div",{className:vn.a.combinations,children:r&&[0,1].map((function(e){return Object(W.jsx)("div",{className:vn.a.column,children:Object(W.jsx)("div",{className:vn.a.text,children:f(e)})},e)}))}),s&&Object(W.jsx)("div",{className:"debugWindow",children:Object(W.jsx)("pre",{children:JSON.stringify(r,null,4)})})]})},xn=n(251),On=n(27),Sn=n.n(On),yn=n(67),Nn=n.n(yn),kn=function(e){var t=e.digit,n=e.pencilMark,i=Object(d.c)((function(e){return e.game})).selectedIndex,a=Object(d.b)();return Object(W.jsx)("div",{className:$e()(Nn.a.guessButton,n&&Nn.a.pencilMark,Nn.a.pencilMark1),onClick:function(e){t>=0&&t<=9&&i&&a(n?bt({index:i,guess:t}):ht({index:i,guess:t}))},children:Object(W.jsx)("div",{className:$e()(Nn.a.digit,n&&Nn.a["digit".concat(t)]),children:t})})},Cn=function(){var e=Object(d.c)((function(e){return e.game})),t=e.selectedIndex,n=e.zoomLevel,i=e.markWrong,a=e.game,s=e.undoStack,c=e.redoStack,l=Object(d.b)(),r=[1,2,3,4,5,6,7,8,9],u=function(e){return l(st(e))},m=function(e,t){return Object(W.jsx)(kn,{digit:e,pencilMark:t},e)};return Object(W.jsxs)("aside",{className:$e()("controls",Sn.a.controls),children:[Object(W.jsxs)("div",{className:Sn.a.zoomButtons,children:[Object(W.jsx)(o.a,{className:"",icon:"mdi mdi-magnify-minus",onClick:function(){return u(-1)},disabled:n<1}),Object(W.jsx)(o.a,{className:"",label:"100 %",onClick:function(){return u(0)}}),Object(W.jsx)(o.a,{className:"",icon:"mdi mdi-magnify-plus",onClick:function(){return u(1)},disabled:n>10})]}),Object(W.jsxs)("div",{className:Sn.a.guessButtons,children:[Object(W.jsx)("div",{className:Sn.a.columns,children:r.map((function(e){return m(e,!0)}))}),Object(W.jsx)(o.a,{className:$e()("button","is-warning",Sn.a.button),icon:"mdi mdi-pencil-off",label:"Delete",onClick:function(e){t&&l(bt({index:t,guess:0}))}}),Object(W.jsx)(o.a,{className:$e()("button is-large",Sn.a.button),onClick:function(e){l(ut())},label:"Auto",icon:"mdi mdi-pencil"}),Object(W.jsx)(o.a,{className:$e()("button is-large",Sn.a.button),onClick:function(e){l(at())},label:"Clear",icon:"mdi mdi-pencil-off"}),Object(W.jsx)("div",{className:Sn.a.columns,children:r.map((function(e){return m(e,!1)}))}),Object(W.jsx)(o.a,{className:$e()("button","is-warning","is-large",Sn.a.button),icon:"mdi mdi-delete",label:"Delete",onClick:function(e){t&&l(ht({index:t,guess:0}))}}),Object(W.jsx)(o.a,{className:$e()("button","p-warning-button","is-large",Sn.a.button),icon:"mdi mdi-restart",label:"Start Over",onClick:function(e){Object(xn.a)({message:"Are you sure you want to start over?",header:"Warning",icon:"pi pi-exclamation-triangle",accept:function(){return l(dt())}})}})]}),Object(W.jsx)("div",{className:"",children:a.state===ne.Solved&&Object(W.jsx)(V.a,{checked:i,onLabel:"Show mistakes",offLabel:"Hide mistakes",onIcon:"mdi mdi-eye",offIcon:"mdi mdi-eye-off",onChange:function(){return l(ft())}})}),Object(W.jsxs)("div",{className:"undoredo",children:[Object(W.jsx)(o.a,{className:$e()("button","p-button-large",Sn.a.button),icon:"mdi mdi-undo",label:"Undo",onClick:function(){return l(gt())},disabled:0===s.length}),Object(W.jsx)(o.a,{className:$e()("button","p-warning-button",Sn.a.button),icon:"mdi mdi-redo",label:"Redo",onClick:function(){return l(jt())},disabled:0===c.length})]}),Object(W.jsxs)("div",{className:"debug",children:[Object(W.jsxs)("div",{children:["Missing: ",a.missingCells]}),Object(W.jsxs)("div",{children:["Selected: ",t]})]})]})};function _n(e,t,n){return{width:"".concat(e*n*10,"px"),height:"".concat(t*n*10,"px")}}function zn(e){return{width:"".concat(10*e,"px"),height:"".concat(10*e,"px")}}var wn=n(252),Mn=n.n(wn),In=function(e){e.cell,e.index;var t=zn(Object(d.c)((function(e){return e.game})).zoomLevel);return Object(W.jsx)("div",{className:$e()("gamecell",Mn.a.blank),style:t})},Gn=n(102),Dn=n.n(Gn),Pn=function(e){var t,n,i=e.cell,a=(e.index,Object(d.c)((function(e){return e.game})).zoomLevel),s=zn(a),c=function(e){return{fontSize:"".concat(e/3.5,"rem")}}(a);return Object(W.jsxs)("div",{className:$e()("gamecell","hintCell"),style:s,children:[Object(W.jsx)("div",{className:"horizontalHint",style:c,children:null===(t=i.hints[0])||void 0===t?void 0:t.sumSolved}),Object(W.jsx)("div",{className:"verticalHint",style:c,children:null===(n=i.hints[1])||void 0===n?void 0:n.sumSolved})]})},Fn=n(79),Jn=n.n(Fn),Bn=function(e){var t,n,i=e.cell,a=e.index,s=Object(d.c)((function(e){return e.game})),c=s.selectedIndex,l=s.zoomLevel,r=s.markWrong,o=Object(d.b)(),u=function(e){return{fontSize:"".concat(e/1.4,"rem")}}(l),m=function(e){return{fontSize:"".concat(e/4,"rem"),lineHeight:"".concat(e/4,"rem")}}(l),b=zn(l),f=r&&i.solution>0&&i.guess!==i.solution;return Object(W.jsxs)("div",{className:$e()("gamecell",Jn.a.number,{selected:a===c}),style:b,onClick:function(e){o(lt(a))},children:[i.guess>0&&Object(W.jsx)("div",{className:$e()(Jn.a.guess,{wrongGuess:f}),style:u,children:i.guess}),!i.guess&&(null===(t=i.pencilMarks)||void 0===t?void 0:t.length)>0&&Object(W.jsx)("div",{className:$e()(Jn.a.pencilMarks),style:{},children:(n=i.pencilMarks,n.map((function(e){return Object(W.jsx)("div",{className:Jn.a["digit".concat(e)],style:m,children:e},e)})))})]})},En=function(){var e=Object(d.c)((function(e){return e.game})),t=e.game,n=e.zoomLevel,i=t.columnCount,a=t.rowCount;return Object(W.jsx)("div",{className:$e()(Dn.a.gameBackground),children:Object(W.jsx)("div",{className:$e()(Dn.a.gridContainer),style:_n(i,a,n),children:Object(W.jsx)("div",{className:$e()(Dn.a.grid),style:{gridTemplateColumns:"repeat(".concat(t.columnCount,", 1fr)"),gridTemplateRows:"repeat(".concat(t.rowCount,", 1fr)")},children:t.cells.map((function(e,t){return function(e,t){return e.type===te.BlankCell?Object(W.jsx)(In,{cell:e,index:t},t):e.type===te.HintCell?Object(W.jsx)(Pn,{cell:e,index:t},t):Object(W.jsx)(Bn,{cell:e,index:t},t)}(e,t)}))})})})},Ln=n(253),Hn=n.n(Ln),An=function(){var e=Object(d.c)((function(e){return e.game})).game,t=Object(d.b)();return Object(i.useEffect)((function(){if(!(e.state>=0)){console.log("Loading game state...");var n=localStorage.getItem("currentGame");if(n){var i=JSON.parse(n);t(ct(i))}else r.push("/")}}),[]),Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(gn,{}),Object(W.jsxs)("div",{className:Hn.a.content,children:[Object(W.jsx)(hn,{}),Object(W.jsx)(En,{}),Object(W.jsx)(Cn,{})]})]})},Rn=n(76),Tn=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.users})).user;return Object(i.useEffect)((function(){t&&r.push("/")}),[t]),Object(W.jsx)("div",{className:"flex align-items-center justify-content-center",style:{height:"60%"},children:Object(W.jsxs)("div",{className:"surface-card p-4 shadow-2 border-round w-full lg:w-6",children:[Object(W.jsxs)("div",{className:"text-center mb-5",children:[Object(W.jsx)("div",{className:"text-900 text-3xl font-medium mb-3",children:"Welcome Back to Mr K.'s Kakuro"}),Object(W.jsx)("span",{className:"text-600 font-medium line-height-3",children:"Don't have an account?"}),Object(W.jsx)(Rn.a,{className:"font-medium no-underline ml-2 text-blue-500 cursor-pointer",to:"/signup",children:"Create one today!"})]}),Object(W.jsx)(Ht.d,{initialValues:{email:"",password:""},onSubmit:function(t){e(function(e){return function(){var t=Object(f.a)(b.a.mark((function t(n){var i,a,s,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(A()),t.prev=1,t.next=4,k.post("/users/login",e);case 4:s=t.sent,i=s.data.user,a=s.data.token,localStorage.setItem("user",JSON.stringify(i)),localStorage.setItem("token",a),t.next=17;break;case 11:return t.prev=11,t.t0=t.catch(1),c=t.t0.response,n(x("There was an error signing you in. Please check email and password.")),n(L({resourceType:"users",resources:[],response:c})),t.abrupt("return");case 17:n(x("Successfully signed in.")),n(J(i));case 19:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()}(t))},children:function(e){e.setFieldValue,e.values;return Object(W.jsxs)(Ht.c,{className:"p-fluid",children:[Object(W.jsx)(At,{name:"email",label:"Email",as:Wt.a,className:"block text-900 font-medium mb-2"}),Object(W.jsx)(At,{name:"password",label:"Password",type:"password",as:Wt.a,className:"block text-900 font-medium mb-2"}),Object(W.jsx)(o.a,{type:"submit",label:"Sign In!",icon:"mdi mdi-login-variant",className:"w-full"})]})}})]})})},qn=Xt.b().shape({name:Xt.c().min(3).max(50,"Must be 50 characters or less").required("Required"),email:Xt.c().max(50,"Must be 50 characters or less").required("Required"),password:Xt.c().min(10,"Must be at least 10 characters").max(25,"Must be 25 characters or less").required("Required")}),Un=function(){var e=Object(d.b)();return Object(W.jsx)("div",{className:"flex align-items-center justify-content-center",style:{height:"60%"},children:Object(W.jsxs)("div",{className:"surface-card p-4 shadow-2 border-round w-full lg:w-6",children:[Object(W.jsxs)("div",{className:"text-center mb-5",children:[Object(W.jsx)("div",{className:"text-900 text-3xl font-medium mb-3",children:"Sign Up For Mr K.'s Kakuro"}),Object(W.jsx)("span",{className:"text-600 font-medium line-height-3",children:"Already have an account?"}),Object(W.jsx)(Rn.a,{className:"font-medium no-underline ml-2 text-blue-500 cursor-pointer",to:"/signin",children:"Sign In!"})]}),Object(W.jsx)(Ht.d,{enableReinitialize:!0,initialValues:{name:"",email:"",password:""},onSubmit:function(t){e(function(e){return function(){var t=Object(f.a)(b.a.mark((function t(n){var i,a,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(A()),t.prev=1,t.next=4,k.post("/users",e);case 4:s=t.sent,i=s.data.user,a=s.data.token,localStorage.setItem("user",JSON.stringify(i)),localStorage.setItem("token",a),t.next=17;break;case 11:return t.prev=11,t.t0=t.catch(1),t.t0.response,n(h("Unable to sign you up.")),n(H("Unable to sign up")),t.abrupt("return");case 17:n(x("Successfully signed up.")),n(J(i));case 19:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()}(t)),r.push("/")},validationSchema:qn,children:function(e){e.setFieldValue,e.values;return Object(W.jsxs)(Ht.c,{className:"p-fluid",children:[Object(W.jsx)(At,{name:"name",label:"Gamer Name",as:Wt.a,className:"block text-900 font-medium mb-2"}),Object(W.jsx)(At,{name:"email",label:"Email",as:Wt.a,className:"block text-900 font-medium mb-2"}),Object(W.jsx)(At,{name:"password",label:"Password",type:"password",as:Wt.a,className:"block text-900 font-medium mb-2"}),Object(W.jsx)(o.a,{type:"submit",label:"Sign Up!",icon:"mdi mdi-account-plus",className:"w-full"})]})}})]})})},Vn=function(){var e={isAuthenticated:null!=Object(d.c)((function(e){return e.users})).user,authenticationPath:"/signin"};return Object(W.jsx)(Z.c,{history:r,children:Object(W.jsxs)(Z.d,{children:[Object(W.jsx)($,Object(Y.a)(Object(Y.a)({},e),{},{path:"/create",component:an})),Object(W.jsx)(Z.b,{path:"/play",component:An}),Object(W.jsx)(Z.b,{path:"/signin",component:Tn}),Object(W.jsx)(Z.b,{path:"/signup",component:Un}),Object(W.jsx)(Z.b,{path:"/",component:fn})]})})},Wn=n(255),Kn=function(){var e=Object(d.c)((function(e){return e.alerts.alerts})),t=Object(d.b)(),n=Object(i.useRef)(null);return Object(i.useEffect)((function(){Object.keys(e).forEach((function(i){var a;null===(a=n.current)||void 0===a||a.show({severity:i,summary:e[i].summary,detail:e[i].detail}),t(v(i))}))}),[t,e]),Object(W.jsx)(Wn.a,{ref:n})},Yn=(n(508),n(36)),Xn=Object(Yn.b)({alerts:S,design:Ye,list:me,game:pt,users:T}),Zn=Object(j.a)({devTools:!1,reducer:Xn}),Qn=function(){return Object(W.jsxs)(d.a,{store:Zn,children:[Object(W.jsx)(K,{}),Object(W.jsx)(Kn,{}),Object(W.jsx)(Vn,{})]})},$n=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,512)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),i(e),a(e),s(e),c(e)}))};c.a.render(Object(W.jsx)(a.a.StrictMode,{children:Object(W.jsx)(Qn,{})}),document.getElementById("root")),$n()},65:function(e,t,n){e.exports={designCell:"DesignCell_designCell__1mdb1",hintMissing:"DesignCell_hintMissing__GjhmS",solution:"DesignCell_solution__1hCNm",index:"DesignCell_index__1hyaN",debug:"DesignCell_debug__3kPCc"}},66:function(e,t,n){e.exports={dialog:"ImportDialog_dialog__5Rts6",dragging:"ImportDialog_dragging__2ddO9",button:"ImportDialog_button__mXT6g",textarea:"ImportDialog_textarea__2QBOO"}},67:function(e,t,n){e.exports={guessButton:"GuessButton_guessButton__2HTay",pencilMark:"GuessButton_pencilMark__30ALz",digit1:"GuessButton_digit1__2OikV",digit2:"GuessButton_digit2__1EUR8",digit3:"GuessButton_digit3__tibxt",digit4:"GuessButton_digit4__2bG_l",digit5:"GuessButton_digit5__1DTxj",digit6:"GuessButton_digit6__29Opa",digit7:"GuessButton_digit7__3aZzj",digit8:"GuessButton_digit8__2lnCS",digit9:"GuessButton_digit9__35MKY"}},78:function(e,t,n){e.exports={dialog:"HintDialog_dialog__3oXoT",label:"HintDialog_label__1UY5p",buttonGrid:"HintDialog_buttonGrid__3MkIY",button:"HintDialog_button__2lNtm"}},79:function(e,t,n){e.exports={number:"NumberCell_number__1mt2Y",guess:"NumberCell_guess__1Iq08",pencilMarks:"NumberCell_pencilMarks__2eIXW",digit1:"NumberCell_digit1__1IfxI",digit2:"NumberCell_digit2__1g9yB",digit3:"NumberCell_digit3__20FAY",digit4:"NumberCell_digit4__1lxHB",digit5:"NumberCell_digit5__324jS",digit6:"NumberCell_digit6__1elhh",digit7:"NumberCell_digit7__1G9wx",digit8:"NumberCell_digit8__21LqC",digit9:"NumberCell_digit9__3ltYs"}}},[[509,1,2]]]);
//# sourceMappingURL=main.158d7ecc.chunk.js.map